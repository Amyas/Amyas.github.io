{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["export function isFunction(value) {\n  return typeof value === 'function'\n}\n\nexport function isObject(value) {\n  return typeof value === 'object' && typeof value !== null\n}","let oldArrayMethods = Array.prototype\nexport let arrayMethods = Object.create(Array.prototype)\n\nconst methods = [\n  'push',\n  'pop',\n  'unshift',\n  'shift',\n  'reverse',\n  'splice',\n  'sort'\n]\n\nmethods.forEach(method=>{\n  arrayMethods[method] = function(...args) {\n    oldArrayMethods[method].call(this, ...args)\n    let inserted;\n    let ob = this.__ob__\n\n    switch(method){\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break\n      case 'splice':\n        inserted = args.slice(2)\n        break;\n      default:\n        break;\n    }\n\n    if(inserted) {\n      ob.observeArray(inserted)\n    }\n  }\n})","import {isObject} from '../utils'\nimport {arrayMethods} from './array'\n\nexport function observe(data) {\n  if(!isObject(data)) return\n\n  if(data.__ob__) return\n\n  return new Observer(data)\n}\n\nclass Observer {\n  constructor(data) {\n    Object.defineProperty(data,'__ob__',{\n      value: this,\n      enumerable: false\n    })\n    if(Array.isArray(data)) {\n      data._proto_ = arrayMethods\n      this.observeArray(data)\n    } else {\n      this.walk(data)\n    }\n  }\n  observeArray(data) {\n    data.forEach(item=>observe(item))\n  }\n  walk(data) {\n    Object.keys(data).forEach(key=>{\n      defineProperty(data,key,data[key])\n    })\n  }\n}\n\nfunction defineProperty(data,key,value) {\n  observe(value)\n  Object.defineProperty(data,key,{\n    get(){\n      return value\n    },\n    set(newValue) {\n      observe(newValue)\n      value = newValue\n    }\n  })\n}","import {isFunction} from './utils'\nimport {observe} from './observer/index'\n\nexport function initState(vm) {\n  const opts = vm.$options\n  if(opts.data) {\n    initData(vm)\n  }\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data\n\n  data = vm._data = isFunction(data) ? data.call(vm) : data\n\n  for(let key in data) {\n    proxy(vm,'_data',key)\n  }\n\n  observe(data)\n}\n\nfunction proxy(vm,source,key) {\n  Object.defineProperty(vm,key,{\n    get(){\n      return vm[source][key]\n    },\n    set(newValue) {\n      vm[source][key] = newValue\n    }\n  })\n}","import {initState} from './state'\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function(options) {\n    const vm = this\n    vm.$options = options\n\n    initState(vm)\n  }\n}","import {initMixin} from './init'\n\nfunction Vue(options) {\n  this._init(options)\n}\n\ninitMixin(Vue)\n\nexport default Vue"],"names":["isFunction","value","isObject","oldArrayMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","call","inserted","ob","__ob__","slice","observeArray","observe","data","Observer","defineProperty","enumerable","isArray","_proto_","walk","item","keys","key","get","set","newValue","initState","vm","opts","$options","initData","_data","proxy","source","initMixin","Vue","_init","options"],"mappings":"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"}