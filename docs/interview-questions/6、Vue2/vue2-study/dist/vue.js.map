{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/global-api/index.js","../src/compiler/parse.js","../src/compiler/generate.js","../src/compiler/index.js","../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/observer/scheduler.js","../src/observer/watcher.js","../src/state.js","../src/vdom/patch.js","../src/lifecycle.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["export function isFunction(value) {\n  return typeof value === 'function'\n}\n\nexport function isObject(value) {\n  return typeof value === 'object' && typeof value !== null\n}\n\n\nconst callbacks = []\nfunction fluashCallbacks(){\n  callbacks.forEach(cb=>cb())\n  waiting = false\n}\n\nfunction timer(fluashCallbacks){\n  let timerFn = ()=>{\n  }\n\n  if(Promise) {\n    timerFn = ()=>Promise.resolve().then(fluashCallbacks)\n  } else if (MutationObserver){\n    let textNode = document.createTextNode(1)\n    let observe = new MutationObserver(fluashCallbacks)\n    observe.observe(textNode,{\n      characterData: true\n    })\n    timerFn = () => {\n      textNode.textContent = 3\n    }\n  } else if (setImmediate) {\n    timerFn = ()=>{\n      setImmediate(fluashCallbacks)\n    }\n  } else {\n    timerFn = ()=>{\n      setTimeout(fluashCallbacks);\n    }\n  }\n  timerFn()\n}\n\nlet waiting = false\nexport function nextTick(callback){\n  callbacks.push(callback)\n\n  if(!waiting) {\n    timer(fluashCallbacks, 0);\n    waiting = true\n  }\n}\n\nconst lifecycleHooks = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed'\n]\n\nlet strats = {} // 存放各种合并策略\n\nfunction mergeHook(parentVal, childVal) {\n  if(childVal) {\n    if(parentVal) {\n      return parentVal.concat(childVal)\n    } else {\n      return [childVal]\n    }\n  } else {\n    return parentVal\n  }\n}\n\nlifecycleHooks.forEach(hook=>{\n  strats[hook] = mergeHook\n})\n\nstrats.components = function (parentVal, childVal){\n  let options = Object.create(parentVal)\n  if(childVal) {\n    for(let key in childVal) {\n      options[key] = childVal[key]\n    }\n  }\n  return options\n}\n\nexport function mergeOptions(parent, child) {\n  const options = {} // 合并后的结果\n  for(let key in parent) {\n    mergeFiled(key)\n  }\n  for(let key in child) {\n    if(parent.hasOwnProperty(key)) {\n      continue\n    }\n    mergeFiled(key)\n  }\n\n  function mergeFiled(key) {\n    const parentVal = parent[key]\n    const childVal = child[key]\n\n    // 策略模式\n    if(strats[key]) {\n      options[key] = strats[key](parentVal, childVal)\n    } else {\n      if(isObject(parentVal) && isObject(childVal)) {\n        options[key] = {...parentVal,...childVal}\n      } else {\n        options[key] = childVal || parentVal\n      }\n    }\n  }\n\n  return options\n}\n\nexport function isReservedTag (str){\n  let reservedTag = `a,div,span,p,img,button,ul,li,h1`\n  return reservedTag.includes(str)\n}","import { mergeOptions } from \"../utils\"\n\nexport function initGlobalApi(Vue) {\n  Vue.options = {} // 用来存放全局配置 // Vue.component Vue.filter Vue.directive 每个组件初始化时都会和options选项进行合并\n  Vue.mixin = function(options) {\n    this.options = mergeOptions(this.options, options)\n    \n    return this\n  }\n  Vue.options._base = Vue // 无论后续创建多少个子类，都可以通过_base找到Vue\n  Vue.options.components = {}\n  Vue.component = function(id, definition){\n    // 保证组件的隔离，保证每个组件都会产生一个新的类，去继承父类\n    definition = this.options._base.extend(definition)\n    this.options.components[id] = definition\n  }\n  Vue.extend = function(options){// 产生一个继承Vue的类，\n    // 拥有父类所有功能\n    const Super = this\n    const Sub = function VueComponent(options){ \n      this._init(options)\n    }\n    // 原型继承\n    Sub.prototype = Object.create(Super.prototype)\n    Sub.prototype.constructor = Sub\n    Sub.options = mergeOptions(Super.options, options) // 只和Vue.options合并\n    return Sub\n  }\n}\n\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*` // 标签名\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})` // 用来获取的标签名\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) // 匹配开始标签\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`) // 匹配闭合标签\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst startTagClose = /^\\s*(\\/?)>/\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\nlet root = null\nlet stack = []\nfunction createAstElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: 1, // 元素：1，文本：3\n    children: [],\n    parent: null,\n    attrs\n  }\n}\n\nfunction start(tagName, attributes) {\n  let parent = stack[stack.length - 1]\n  let element = createAstElement(tagName, attributes)\n  if(!root) {\n    root = element\n  }\n  if(parent) {\n    element.parent = parent\n    parent.children.push(element)\n  }\n  stack.push(element)\n}\nfunction end(tagName) {\n  let last = stack.pop()\n  if(last.tag !== tagName) {\n    throw new Error(\"标签闭合错误\")\n  }\n}\nfunction chars(text) {\n  text = text.replace(/\\s/g, \"\")\n  let parent = stack[stack.length - 1]\n  if(text) {\n    parent.children.push({\n      type: 3, // 元素：1，文本：3\n      text\n    })\n  }\n}\n\nexport function parseHTML(html){\n  root = null\n  stack = []\n\n  function advance(len) {\n    html = html.substring(len)\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if(start) {\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      advance(start[0].length) // 删除已经匹配的开始标签\n\n      let end\n      let attr\n      while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))) { // 没有遇到标签结尾\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5]\n        })\n        advance(attr[0].length)\n      }\n      if(end) {\n        advance(end[0].length)\n      }\n      return match\n    }\n    return false // 不是开始标签\n  }\n\n  while(html) {\n    let textEnd = html.indexOf('<')\n    if(textEnd === 0) {\n      const startTagMatch = parseStartTag() // 解析开始标签\n      if(startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue;\n      }\n\n      const endTagMatch = html.match(endTag)// 解析结束标签\n      if(endTagMatch) {\n        end(endTagMatch[1])\n        advance(endTagMatch[0].length)\n        continue;\n      }\n    }\n    let text\n    if(textEnd > 0) {\n      text = html.substring(0, textEnd)\n    }\n    if(text) {\n      chars(text)\n      advance(text.length)\n    }\n  }\n\n  return root\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\n\nfunction genProps(attrs) {\n  let str = ''\n  for(let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i]\n    if(attr.name === 'style') {\n      let styleObj = {}\n      attr.value.replace(/([^;:]+)\\:([^;:]+)/g, function(){\n        styleObj[arguments[1]] = arguments[2]\n      })\n      attr.value = styleObj\n    }\n    str+= `${attr.name}:${JSON.stringify(attr.value)},`\n  }\n  return `{${str.slice(0, -1)}}`\n}\n\nfunction gen(el) {\n  if(el.type === 1) {\n    return generate(el)\n  } else {\n    let text = el.text\n    if(!defaultTagRE.test(text)) {\n      return `_v(\"${text}\")`\n    } else {\n      let tokens = []\n      let match\n      let lastIndex = defaultTagRE.lastIndex = 0 // defaultTagRE 最后的/g后和exec冲突，导致第一次exec正常，第二次失效\n      while(match = defaultTagRE.exec(text)) {\n        let index = match.index\n        if(index > lastIndex) {\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n        }\n        tokens.push(`_s(${match[1].trim()})`) // _s JSON.stringify()\n        lastIndex = index + match[0].length\n      }\n      if(lastIndex < text.length) {\n        tokens.push(JSON.stringify(text.slice(lastIndex)))\n      }\n      return `_v(${tokens.join('+')})`\n    }\n  }\n}\n\nfunction genChildren(el){\n  let children = el.children\n  if(children) {\n    return children.map(c=>gen(c)).join(',')\n  }\n  return false\n}\n\nexport function generate(el) {\n  let children = genChildren(el)\n  let code = `_c(\"${el.tag}\", ${\n    el.attrs.length ? genProps(el.attrs) : 'undefined'\n  }${\n    children ? `,${children}` : \"\"\n  })`\n\n  return code\n}","import { parseHTML } from './parse'\nimport { generate } from './generate'\n\nexport function compileToFunction(template) {\n  let root = parseHTML(template)\n\n  let code = generate(root)\n\n  let render = new Function(`with(this){return ${code}}`)\n\n  return render\n}","let oldArrayMethods = Array.prototype\nexport let arrayMethods = Object.create(Array.prototype)\n\nconst methods = [\n  'push',\n  'pop',\n  'unshift',\n  'shift',\n  'reverse',\n  'splice',\n  'sort'\n]\n\nmethods.forEach(method=>{\n  arrayMethods[method] = function(...args) {\n    oldArrayMethods[method].call(this, ...args)\n    let inserted;\n    let ob = this.__ob__\n\n    switch(method){\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break\n      case 'splice':\n        inserted = args.slice(2)\n        break;\n      default:\n        break;\n    }\n\n    if(inserted) {\n      ob.observeArray(inserted)\n    }\n\n    ob.dep.notify()\n  }\n})","let id = 0\n\nexport default class Dep {\n  constructor(){\n    this.id = id++\n    this.subs = [] // 用来存放watcher\n  }\n\n  depend(){\n    if(Dep.target) {\n      Dep.target.addDep(this)\n    }\n  }\n\n  addSub(watcher){\n    this.subs.push(watcher)\n  }\n\n  notify(){\n    this.subs.forEach(watcher=>watcher.update())\n  }\n}\n\nDep.target = null\n\nlet stack = []\n\nexport function pushTarget(watcher) {\n  Dep.target = watcher\n  stack.push(watcher)\n}\n\nexport function popTarget(){\n  stack.pop()\n  Dep.target = stack[stack.length - 1]\n}","import {isObject} from '../utils'\nimport {arrayMethods} from './array'\nimport Dep from './dep'\n\nexport function observe(data) {\n  if(!isObject(data)) return\n\n  if(data.__ob__) return data.__ob__\n\n  return new Observer(data)\n}\n\nclass Observer {\n  constructor(data) {\n    this.dep = new Dep()\n\n    Object.defineProperty(data,'__ob__',{\n      value: this,\n      enumerable: false\n    })\n    if(Array.isArray(data)) {\n      data._proto_ = arrayMethods\n      this.observeArray(data)\n    } else {\n      this.walk(data)\n    }\n  }\n  observeArray(data) {\n    data.forEach(item=>observe(item))\n  }\n  walk(data) {\n    Object.keys(data).forEach(key=>{\n      defineProperty(data,key,data[key])\n    })\n  }\n}\n\nfunction dependArray(value) {\n  for(let i = 0; i < value.length; i++) {\n    let current = value[i]\n    current.__ob__ && current.__ob__.dep.depend()\n    if(Array.isArray(current)) {\n      dependArray(current)\n    }\n  }\n}\n\n\nfunction defineProperty(data,key,value) {\n  let childOb = observe(value)\n  let dep = new Dep()\n  Object.defineProperty(data,key,{\n    get(){\n      if(Dep.target) {\n        dep.depend()\n        if(childOb) {\n          childOb.dep.depend()\n          if(Array.isArray(value)) {\n            dependArray(value)\n          }\n        }\n      }\n      return value\n    },\n    set(newValue) {\n      if(newValue !== value) {\n        observe(newValue)\n        value = newValue\n        dep.notify()\n      }\n    }\n  })\n}","import { nextTick } from \"../utils\"\n\nlet queue = []\nlet has = {}\n\nlet pending = false\n\nfunction fluashSchedulerQueue(){\n  for(let i = 0;i<queue.length;i++) {\n    queue[i].run()\n  }\n  queue = []\n  has = {}\n  pending = false\n}\n\nexport function queueWatcher(watcher) {\n  const id = watcher.id\n  if(has[id] === null || has[id] === undefined) {\n    queue.push(watcher)\n    has[id] = true\n\n    if(!pending) {\n      nextTick(fluashSchedulerQueue, 0);\n      pending = true\n    }\n  }\n\n}","import { popTarget, pushTarget } from \"./dep\"\nimport { queueWatcher } from \"./scheduler\"\n\nlet id = 0\n\nexport default class Watcher {\n  constructor(vm, exprOrFn, callback, options) {\n    this.vm = vm\n    this.exprOrFn = exprOrFn\n    this.user = !!options.user // 是不是用户watcher\n    this.callback = callback\n    this.options = options\n    this.lazy = !!options.lazy // 是否非立即执行\n    this.dirty = options.lazy // 如果是计算属性默认为脏属性 lazy = true\n    this.id = id++\n\n    \n    if(typeof exprOrFn === 'string') {\n      this.getter = function(){\n        let path = exprOrFn.split('.')\n        let obj = vm\n        for(let i = 0;i < path.length; i++) {\n          obj = obj[path[i]]\n        }\n\n        return obj\n      }\n    } else {\n      this.getter = exprOrFn\n    }\n\n    this.deps = []\n    this.depsId = new Set()\n\n    this.value =  this.lazy ? undefined : this.get() // 默认初始化取值\n  }\n\n  get(){\n    pushTarget(this)\n    const value = this.getter.call(this.vm)\n    popTarget()\n\n    return value\n  }\n\n  update(){\n    if(this.lazy) {\n      this.dirty = true\n    } else {\n      queueWatcher(this) // 多次调用update，先缓存watcher，一会一起更新\n    }\n  }\n\n  run(){\n    let newValue = this.get()\n    let oldValue = this.value\n\n    this.value = newValue\n\n    if(this.user) {\n      this.callback.call(this.vm, newValue, oldValue)\n    }\n  }\n\n  addDep(dep) {\n    let id = dep.id\n    if(!this.depsId.has(id)) {\n      this.depsId.add(id)\n      this.deps.push(dep)\n      dep.addSub(this)\n    }\n  }\n\n  evalute(){\n    this.dirty = false // 表示取过值了\n    this.value = this.get() // 用户getter实行\n  }\n\n  depend(){\n    let i = this.deps.length\n    while(i--) {\n      this.deps[i].depend() // 计算属性内的data 属性 收集渲染watcher\n    }\n  }\n}","import {isFunction} from './utils'\nimport {observe} from './observer/index'\nimport Watcher from './observer/watcher'\nimport Dep from './observer/dep'\n\nexport function stateMixin(Vue) {\n  Vue.prototype.$watch = function(key, handler, options = {}) {\n    options.user = true // 用户自己写的watcher\n    new Watcher(this, key, handler,options)\n  }\n}\n\nexport function initState(vm) {\n  const opts = vm.$options\n  if(opts.data) {\n    initData(vm)\n  }\n  if(opts.computed) {\n    initComputed(vm, opts.computed)\n  }\n  if(opts.watch) {\n    initWatch(vm, opts.watch)\n  }\n}\n\nfunction initComputed(vm, computed){\n  const watchers = vm._computedWatchers = {}\n  for(let key in computed) {\n    const userDef = computed[key]\n    let getter = typeof userDef === 'function' ? userDef : userDef.get\n\n    watchers[key] = new Watcher(vm, getter, ()=>{},{lazy: true}) // 默认不执行\n\n    // 将key定义到vm上\n    defineComputed(vm, key, userDef)\n  }\n}\n\nfunction createComputedGetter(key) {\n  return function computedGetter(){\n    // 包含所有计算属性，通过keyu拿到对应watcher\n    let watcher = this._computedWatchers[key]\n\n    // 脏就是要调用用户的getter，不脏就走缓存\n    if(watcher.dirty) {\n      watcher.evalute()\n    }\n\n    // 如果去完值后Dep.target还有值，继续向上收集（渲染watcher）\n    if(Dep.target) {\n      watcher.depend()\n    }\n\n    return watcher.value\n  }\n}\n\nlet shareProperty = {}\nfunction defineComputed(vm, key, userDef) {\n  if(typeof userDef === 'function') {\n    shareProperty.get = createComputedGetter(key)\n  } else {\n    shareProperty.get = createComputedGetter(key)\n    shareProperty.set = userDef.set\n  }\n  Object.defineProperty(vm, key, shareProperty)\n}\n\nfunction initWatch(vm, watch) {\n  for(let key in watch) {\n    let handler = watch[key]\n    if(Array.isArray(handler)) { // 多个函数\n      for(let i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i])\n      }\n    } else { // 单个函数\n      createWatcher(vm, key, handler)\n    }\n  }\n}\n\nfunction createWatcher(vm, key, handler){\n  return vm.$watch(key, handler)\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data\n\n  data = vm._data = isFunction(data) ? data.call(vm) : data\n\n  for(let key in data) {\n    proxy(vm,'_data',key)\n  }\n\n  observe(data)\n}\n\nfunction proxy(vm,source,key) {\n  Object.defineProperty(vm,key,{\n    get(){\n      return vm[source][key]\n    },\n    set(newValue) {\n      vm[source][key] = newValue\n    }\n  })\n}","export function patch(oldVnode, vnode){\n  if(!oldVnode) {\n    return createElm(vnode) // 如果没有el，就是组件，直接根据虚拟节点返回真实节点\n  }\n  if(oldVnode.nodeType === 1) { // 真是元素，第一次更新\n    // 用vnode来生成真实dom替换原来的dom元素\n    \n    const parentEl = oldVnode.parentNode\n\n    let elm = createElm(vnode) // 根据虚拟节点创建元素\n    parentEl.insertBefore(elm, oldVnode.nextSibling)\n\n    parentEl.removeChild(oldVnode)\n\n    return elm\n  } else {\n    // 如果标签名称不一样，直接删除老的换成新的即可\n    if(oldVnode.tag !== vnode.tag) {\n      // 可以通过vnode.el获取真实dom\n      return oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el)\n    }\n\n    // 如果标签一样，比较属性，传入新的虚拟节点和老的属性，用新的属性更新老的\n    // 标签相同，直接复用之前的node节点，不需要重新创建 \n    let el = vnode.el = oldVnode.el\n    \n    // 根据新传入的props，进行props修改\n    patchProps(vnode, oldVnode.data)\n\n    // 如果两个虚拟节点是文本节点，比较文本内容\n    if(vnode.tag === undefined) { // 新老都是文本\n      if(oldVnode.text !== vnode.text) {\n        el.textContent = vnode.text\n      }\n      // 都是文本，就不需要对下面的内容了\n      return\n    }\n\n    let oldChildren = oldVnode.children || []\n    let newChildren = vnode.children || []\n    \n    if(oldChildren.length > 0 && newChildren.length > 0) {\n      // 双方都有儿子\n      // vue使用双指针处理\n      patchChildren(el, oldChildren, newChildren)\n    } else if (newChildren.length > 0) { // 只有新节点有儿子\n      for(let i = 0; i < newChildren.length; i++) {\n        // 创建出儿子的真实节点，然后拆入进去\n        let child = createElm(newChildren[i])\n        el.appendChild(child)\n      }\n    } else if (oldChildren.length > 0) { // 只有老节点有儿子\n      // 新节点没儿子，直接清空\n      el.innerHTML = ''\n    }\n  }\n}\n\n// 是否为同一个元素\nfunction isSameVnode(oldVnode, newVnode) {\n  return (oldVnode.tag === newVnode.tag) && (oldVnode.key === newVnode.key)\n}\n\nfunction patchChildren(el, oldChildren, newChildren) {\n  let oldStartIndex = 0\n  let oldStartVnode = oldChildren[0]\n  let oldEndIndex = oldChildren.length - 1\n  let oldEndVnode = oldChildren[oldChildren.length - 1]\n\n  let newStartIndex = 0\n  let newStartVnode = newChildren[0]\n  let newEndIndex = newChildren.length - 1\n  let newEndVnode = newChildren[newChildren.length - 1]\n\n  // 只比对同等数量的节点\n  while(oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\n    // 同时循环新的节点和老的节点\n    if(isSameVnode(oldStartVnode, newStartVnode)) { // 头部开始比较\n      patch(oldStartVnode, newStartVnode)\n      oldStartVnode = oldChildren[++oldStartIndex]\n      newStartVnode = newChildren[++newStartIndex]\n    } else if(isSameVnode(oldEndVnode, newEndVnode)) { // 尾部开始比较\n      patch(oldEndVnode, newEndVnode)\n      oldEndVnode = oldChildren[--oldEndIndex]\n      newEndVnode = newChildren[--newEndIndex]\n    } else if (isSameVnode(oldStartVnode, newEndVnode)) { // 头尾比较\n      patch(oldStartVnode, newEndVnode)\n      el.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling)\n      oldStartVnode = oldChildren[++oldStartIndex]\n      newEndVnode = newChildren[--newEndIndex]\n    } else if(isSameVnode(oldEndVnode, newStartVnode)) { // 尾头比较\n      patch(oldEndVnode, newStartVnode)\n      el.insertBefore(oldEndVnode.el, oldStartVnode.el)\n      oldEndVnode = oldChildren[--oldEndIndex]\n      newStartVnode = newChildren[++newStartIndex]\n    }\n  }\n\n  // 如果用户追加了n个节点\n  if(newStartIndex <= newEndIndex) {\n    for(let i = newStartIndex; i <= newEndIndex; i++) {\n      // el.appendChild(createElm(newChildren[i]))\n      // insertBefore 可以直线appendChild功能\n      \n      // 看一下尾指针的下一个元素是否存在\n      let anchor = newChildren[newEndIndex + 1] == null ? null : newChildren[newEndIndex + 1].el\n      el.insertBefore(createElm(newChildren[i]), anchor)\n    }\n  }\n\n  // 用户减少了n个节点\n  if(oldStartIndex <= oldEndIndex) {\n    for(let i = oldStartIndex; i <= oldEndIndex; i++) {\n      el.removeChild(oldChildren[i].el)\n    }\n  }\n  \n}\n\n// 初次渲染时可以调用此方法，后续更新也可以调用此方法\nfunction patchProps(vnode, oldProps = {}){\n  let newProps = vnode.data || {}\n  let el = vnode.el\n\n  // 如果老的属性有，新的没有直接删除\n  let newStyle = newProps.style || {}\n  let oldStyle = oldProps.style || {}\n  for(let key in oldStyle) {\n    if(!newStyle[key]) { // 新的元素内不存在\n      el.style[key] = ''\n    }\n  }\n\n  for(let key in oldProps) {\n    if(!newProps[key]) {\n      el.removeAttribute(key)\n    }\n  }\n\n  for(let key in newProps) {\n    if(key === 'style') {\n      for(let styleName in newProps.style) {\n        el.style[styleName] = newProps.style[styleName]\n      }\n    } else {\n      vnode.el.setAttribute(key, newProps[key])\n    }\n  }\n}\n\n\nfunction createComponent(vnode){\n  let i = vnode.data\n  // i = vnode.data.hook -> i = vnode.data.hook.init\n  // 判断+复值\n  if((i = i.hook) && (i = i.init)) {\n    i(vnode) // 调用组件的init方法\n  }\n  if(vnode.componentInstance) {// 说明子组件new 完成了，并且创建了真实dom\n    return true\n  }\n}\n\nexport function createElm(vnode) {\n  let {\n    tag,\n    data,\n    children,\n    text,\n    vm\n  } = vnode\n\n  if(typeof tag === 'string') { // 元素\n    if(createComponent(vnode)) {\n      // 返回组件对应的真实节点\n      return vnode.componentInstance.$el\n    }\n\n    vnode.el = document.createElement(tag)\n    patchProps(vnode)\n\n    children.forEach(child=>{\n      vnode.el.appendChild(createElm(child))\n    })\n  } else {\n    vnode.el = document.createTextNode(text)\n  }\n\n  return vnode.el\n}","import { callHook } from './init'\nimport Watcher from './observer/watcher'\nimport { nextTick } from './utils'\nimport {patch} from './vdom/patch'\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function(vnode) {\n    // 既有初始化又有更新\n    const vm = this\n    vm.$el = patch(vm.$el, vnode)\n  }\n  Vue.prototype.$nextTick = nextTick\n}\n\nexport function mountComponent(vm, el) {\n  // 更新函数，数据变化后，再次调用此函数\n  let updateComponent = () => {\n    // 调用render函数，生成虚拟dom\n    vm._update(vm._render()) // 后续更新可以调用updateComponent\n\n    // 用虚拟dom生成真是dom\n  }\n\n  callHook(vm, 'beforeMount')\n  new Watcher(vm, updateComponent, ()=>{\n    console.log('更新视图了')\n  }, true) // 是一个渲染watcher\n  callHook(vm, 'mounted')\n}","import { compileToFunction } from './compiler/index'\nimport {initState} from './state'\nimport { mountComponent } from './lifecycle'\nimport { mergeOptions } from './utils'\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function(options) {\n    const vm = this\n    vm.$options = mergeOptions(vm.constructor.options, options)\n\n    callHook(vm, 'beforeCreate')\n    initState(vm)\n    callHook(vm, 'created')\n\n    if(vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n    \n  }\n\n  Vue.prototype.$mount = function(el) {\n    const vm = this\n    const options = vm.$options\n    el = document.querySelector(el)\n    vm.$el = el\n\n    if(!options.render) {\n      let template = options.template\n      if(!template && el) {\n        template = el.outerHTML\n      }\n      let render = compileToFunction(template)\n      options.render = render\n    }\n    \n    mountComponent(vm, el) // 组建挂在\n  }\n}\n\nexport function callHook(vm, hook){\n  const handlers = vm.$options[hook]\n  if(handlers) {\n    for(let i = 0; i < handlers.length; i++) {\n      handlers[i].call(vm)\n    }\n  }\n}","import { isObject, isReservedTag } from \"../utils\"\n\nexport function createElement(vm, tag, data = {}, ...children){\n  // 如果tag是一个组件，应该渲染一个组件的vnode\n  if(isReservedTag(tag)) {\n    return vnode(vm,tag,data,data.key,children,undefined)\n  } else {\n    const Ctor = vm.$options.components[tag]\n    return createComponent(vm,tag,data,data.key,children,Ctor)\n  }\n}\n// 创建组件的虚拟节点\nfunction createComponent(vm,tag,data,key,children,Ctor) {\n  if(isObject(Ctor)) {\n    Ctor = vm.$options._base.extend(Ctor)\n  }\n  data.hook = { // 渲染组件时，需要调用此初始化方法\n    init(vnode){\n      let vm = vnode.componentInstance = new Ctor({_isComponent: true}) // new Sub() Vue.extend实现\n      vm.$mount()\n    }\n  }\n  return vnode(vm, `vue-component-${tag}`, data, key, undefined,undefined, {Ctor,children})\n}\n\nexport function createTextElement(vm, text){\n  return vnode(vm,undefined,undefined,undefined,undefined,text)\n}\nfunction vnode(vm, tag,data,key,children,text, componentOptions) {\n  return {\n    vm,\n    tag,\n    data,\n    key,\n    children,\n    text,\n    componentOptions\n  }\n}","import {createElement,createTextElement} from './vdom/index'\n\nexport function renderMixin(Vue){\n  Vue.prototype._c = function(){ // createElement\n    return createElement(this, ...arguments)\n  }\n  Vue.prototype._v = function(text){ // createTextElement\n    return createTextElement(this, text)\n  }\n  Vue.prototype._s = function(val){ // stringify\n    if(typeof val === 'object') {\n      return JSON.stringify(val)\n    }\n    return val\n  }\n  Vue.prototype._render = function(){\n    const vm = this\n    let render = vm.$options.render // compileToFunction执行结果\n\n    let vnode = render.call(vm)\n    return vnode\n  }\n}","import { initGlobalApi } from './global-api/index'\nimport {initMixin} from './init'\nimport {lifecycleMixin} from './lifecycle'\nimport {renderMixin} from './render'\nimport { stateMixin } from './state'\n\nfunction Vue(options) {\n  this._init(options)\n}\n\ninitMixin(Vue)\nrenderMixin(Vue) // _render\nlifecycleMixin(Vue) // _update\nstateMixin(Vue) // watcher\ninitGlobalApi(Vue)\n\nimport {compileToFunction} from './compiler/index'\nimport {createElm, patch} from './vdom/patch'\n\nlet oldTemplate = `<div>\n  <li key=\"a\">A</li>\n  <li key=\"b\">B</li>\n  <li key=\"c\">C</li>\n  <li key=\"d\">D</li>\n</div>`\nlet vm1 = new Vue({data:{message:'hello world'}})\nconst render1 = compileToFunction(oldTemplate)\nconst oldVnode = render1.call(vm1)\ndocument.body.appendChild(createElm(oldVnode))\n\nlet newTemplate = `<div>\n  <li key=\"d\">D</li>\n  <li key=\"a\">A</li>\n  <li key=\"b\">B</li>\n  <li key=\"c\">C</li>\n</div>`\nlet vm2 = new Vue({data:{message:'zf'}})\nconst render2 = compileToFunction(newTemplate)\nconst newVnode = render2.call(vm2)\n\n\nsetTimeout(() => {\n  \n// 根据信的虚拟节点更新老的节点\npatch(oldVnode, newVnode)\n}, 1000);\n\n\n\n\nexport default Vue"],"names":["isFunction","value","isObject","callbacks","fluashCallbacks","forEach","cb","waiting","timer","timerFn","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","nextTick","callback","push","lifecycleHooks","strats","mergeHook","parentVal","childVal","concat","hook","components","options","Object","create","key","mergeOptions","parent","child","mergeFiled","hasOwnProperty","isReservedTag","str","reservedTag","includes","initGlobalApi","Vue","mixin","_base","component","id","definition","extend","Super","Sub","VueComponent","_init","prototype","constructor","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","stack","createAstElement","tagName","attrs","tag","type","children","start","attributes","length","element","end","last","pop","Error","chars","text","replace","parseHTML","html","advance","len","substring","parseStartTag","match","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","i","styleObj","arguments","JSON","stringify","slice","gen","el","generate","test","tokens","lastIndex","exec","index","trim","join","genChildren","map","c","code","compileToFunction","template","render","Function","oldArrayMethods","Array","arrayMethods","methods","method","args","call","inserted","ob","__ob__","observeArray","dep","notify","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","data","Observer","defineProperty","enumerable","isArray","_proto_","walk","item","keys","dependArray","current","depend","childOb","get","set","newValue","queue","has","pending","fluashSchedulerQueue","run","queueWatcher","undefined","Watcher","vm","exprOrFn","user","lazy","dirty","getter","path","split","obj","deps","depsId","Set","oldValue","add","addSub","stateMixin","$watch","handler","initState","opts","$options","initData","computed","initComputed","watch","initWatch","watchers","_computedWatchers","userDef","defineComputed","createComputedGetter","computedGetter","evalute","shareProperty","createWatcher","_data","proxy","source","patch","oldVnode","vnode","createElm","nodeType","parentEl","parentNode","elm","insertBefore","nextSibling","removeChild","replaceChild","patchProps","oldChildren","newChildren","patchChildren","appendChild","innerHTML","isSameVnode","newVnode","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","anchor","oldProps","newProps","newStyle","style","oldStyle","removeAttribute","styleName","setAttribute","createComponent","init","componentInstance","$el","createElement","lifecycleMixin","_update","$nextTick","mountComponent","updateComponent","_render","callHook","console","log","initMixin","$mount","querySelector","outerHTML","handlers","Ctor","_isComponent","createTextElement","componentOptions","renderMixin","_c","_v","_s","val","oldTemplate","vm1","message","render1","body","newTemplate","vm2","render2"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,UAAT,CAAoBC,KAApB,EAA2B;EAChC,EAAO,OAAA,OAAOA,KAAP,KAAiB,UAAxB,CAAA;EACD,CAAA;EAEM,SAASC,QAAT,CAAkBD,KAAlB,EAAyB;EAC9B,EAAO,OAAA,OAAA,CAAOA,KAAP,CAAiB,KAAA,QAAjB,IAA6B,OAAOA,KAAP,KAAiB,IAArD,CAAA;EACD,CAAA;EAGD,IAAME,SAAS,GAAG,EAAlB,CAAA;;EACA,SAASC,eAAT,GAA0B;EACxBD,EAAAA,SAAS,CAACE,OAAV,CAAkB,UAAAC,EAAE,EAAA;EAAA,IAAA,OAAEA,EAAE,EAAJ,CAAA;EAAA,GAApB,CAAA,CAAA;EACAC,EAAAA,OAAO,GAAG,KAAV,CAAA;EACD,CAAA;;EAED,SAASC,KAAT,CAAeJ,eAAf,EAA+B;EAC7B,EAAA,IAAIK,OAAO,GAAG,SAAI,OAAA,GAAA,EAAlB,CAAA;;EAGA,EAAA,IAAGC,OAAH,EAAY;EACVD,IAAAA,OAAO,GAAG,SAAA,OAAA,GAAA;EAAA,MAAA,OAAIC,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuBR,eAAvB,CAAJ,CAAA;EAAA,KAAV,CAAA;EACD,GAFD,MAEO,IAAIS,gBAAJ,EAAqB;EAC1B,IAAA,IAAIC,QAAQ,GAAGC,QAAQ,CAACC,cAAT,CAAwB,CAAxB,CAAf,CAAA;EACA,IAAA,IAAIC,OAAO,GAAG,IAAIJ,gBAAJ,CAAqBT,eAArB,CAAd,CAAA;EACAa,IAAAA,OAAO,CAACA,OAAR,CAAgBH,QAAhB,EAAyB;EACvBI,MAAAA,aAAa,EAAE,IAAA;EADQ,KAAzB,CAAA,CAAA;;EAGAT,IAAAA,OAAO,GAAG,SAAM,OAAA,GAAA;EACdK,MAAAA,QAAQ,CAACK,WAAT,GAAuB,CAAvB,CAAA;EACD,KAFD,CAAA;EAGD,GATM,MASA,IAAIC,YAAJ,EAAkB;EACvBX,IAAAA,OAAO,GAAG,SAAI,OAAA,GAAA;EACZW,MAAAA,YAAY,CAAChB,eAAD,CAAZ,CAAA;EACD,KAFD,CAAA;EAGD,GAJM,MAIA;EACLK,IAAAA,OAAO,GAAG,SAAI,OAAA,GAAA;EACZY,MAAAA,UAAU,CAACjB,eAAD,CAAV,CAAA;EACD,KAFD,CAAA;EAGD,GAAA;;EACDK,EAAAA,OAAO,EAAA,CAAA;EACR,CAAA;;EAED,IAAIF,OAAO,GAAG,KAAd,CAAA;EACO,SAASe,QAAT,CAAkBC,QAAlB,EAA2B;EAChCpB,EAAAA,SAAS,CAACqB,IAAV,CAAeD,QAAf,CAAA,CAAA;;EAEA,EAAG,IAAA,CAAChB,OAAJ,EAAa;EACXC,IAAAA,KAAK,CAACJ,eAAD,CAAL,CAAA;EACAG,IAAAA,OAAO,GAAG,IAAV,CAAA;EACD,GAAA;EACF,CAAA;EAED,IAAMkB,cAAc,GAAG,CACrB,cADqB,EAErB,SAFqB,EAGrB,aAHqB,EAIrB,SAJqB,EAKrB,cALqB,EAMrB,SANqB,EAOrB,eAPqB,EAQrB,WARqB,CAAvB,CAAA;EAWA,IAAIC,MAAM,GAAG,EAAb;;EAEA,SAASC,SAAT,CAAmBC,SAAnB,EAA8BC,QAA9B,EAAwC;EACtC,EAAA,IAAGA,QAAH,EAAa;EACX,IAAA,IAAGD,SAAH,EAAc;EACZ,MAAA,OAAOA,SAAS,CAACE,MAAV,CAAiBD,QAAjB,CAAP,CAAA;EACD,KAFD,MAEO;EACL,MAAO,OAAA,CAACA,QAAD,CAAP,CAAA;EACD,KAAA;EACF,GAND,MAMO;EACL,IAAA,OAAOD,SAAP,CAAA;EACD,GAAA;EACF,CAAA;;EAEDH,cAAc,CAACpB,OAAf,CAAuB,UAAA0B,IAAI,EAAE;EAC3BL,EAAAA,MAAM,CAACK,IAAD,CAAN,GAAeJ,SAAf,CAAA;EACD,CAFD,CAAA,CAAA;;EAIAD,MAAM,CAACM,UAAP,GAAoB,UAAUJ,SAAV,EAAqBC,QAArB,EAA8B;EAChD,EAAA,IAAII,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAcP,SAAd,CAAd,CAAA;;EACA,EAAA,IAAGC,QAAH,EAAa;EACX,IAAA,KAAI,IAAIO,GAAR,IAAeP,QAAf,EAAyB;EACvBI,MAAAA,OAAO,CAACG,GAAD,CAAP,GAAeP,QAAQ,CAACO,GAAD,CAAvB,CAAA;EACD,KAAA;EACF,GAAA;;EACD,EAAA,OAAOH,OAAP,CAAA;EACD,CARD,CAAA;;EAUO,SAASI,YAAT,CAAsBC,MAAtB,EAA8BC,KAA9B,EAAqC;EAC1C,EAAA,IAAMN,OAAO,GAAG,EAAhB,CAD0C;;EAE1C,EAAA,KAAI,IAAIG,GAAR,IAAeE,MAAf,EAAuB;EACrBE,IAAAA,UAAU,CAACJ,GAAD,CAAV,CAAA;EACD,GAAA;;EACD,EAAA,KAAI,IAAIA,IAAR,IAAeG,KAAf,EAAsB;EACpB,IAAA,IAAGD,MAAM,CAACG,cAAP,CAAsBL,IAAtB,CAAH,EAA+B;EAC7B,MAAA,SAAA;EACD,KAAA;;EACDI,IAAAA,UAAU,CAACJ,IAAD,CAAV,CAAA;EACD,GAAA;;EAED,EAASI,SAAAA,UAAT,CAAoBJ,GAApB,EAAyB;EACvB,IAAA,IAAMR,SAAS,GAAGU,MAAM,CAACF,GAAD,CAAxB,CAAA;EACA,IAAA,IAAMP,QAAQ,GAAGU,KAAK,CAACH,GAAD,CAAtB,CAFuB;;EAKvB,IAAA,IAAGV,MAAM,CAACU,GAAD,CAAT,EAAgB;EACdH,MAAAA,OAAO,CAACG,GAAD,CAAP,GAAeV,MAAM,CAACU,GAAD,CAAN,CAAYR,SAAZ,EAAuBC,QAAvB,CAAf,CAAA;EACD,KAFD,MAEO;EACL,MAAG3B,IAAAA,QAAQ,CAAC0B,SAAD,CAAR,IAAuB1B,QAAQ,CAAC2B,QAAD,CAAlC,EAA8C;EAC5CI,QAAAA,OAAO,CAACG,GAAD,CAAP,GAAmBR,cAAAA,CAAAA,cAAAA,CAAAA,EAAAA,EAAAA,SAAnB,GAAgCC,QAAhC,CAAA,CAAA;EACD,OAFD,MAEO;EACLI,QAAAA,OAAO,CAACG,GAAD,CAAP,GAAeP,QAAQ,IAAID,SAA3B,CAAA;EACD,OAAA;EACF,KAAA;EACF,GAAA;;EAED,EAAA,OAAOK,OAAP,CAAA;EACD,CAAA;EAEM,SAASS,aAAT,CAAwBC,GAAxB,EAA4B;EACjC,EAAA,IAAIC,WAAW,GAAf,kCAAA,CAAA;EACA,EAAA,OAAOA,WAAW,CAACC,QAAZ,CAAqBF,GAArB,CAAP,CAAA;EACD;;EC3HM,SAASG,aAAT,CAAuBC,GAAvB,EAA4B;EACjCA,EAAAA,GAAG,CAACd,OAAJ,GAAc,EAAd,CADiC;;EAEjCc,EAAAA,GAAG,CAACC,KAAJ,GAAY,UAASf,OAAT,EAAkB;EAC5B,IAAKA,IAAAA,CAAAA,OAAL,GAAeI,YAAY,CAAC,KAAKJ,OAAN,EAAeA,OAAf,CAA3B,CAAA;EAEA,IAAA,OAAO,IAAP,CAAA;EACD,GAJD,CAAA;;EAKAc,EAAAA,GAAG,CAACd,OAAJ,CAAYgB,KAAZ,GAAoBF,GAApB,CAPiC;;EAQjCA,EAAAA,GAAG,CAACd,OAAJ,CAAYD,UAAZ,GAAyB,EAAzB,CAAA;;EACAe,EAAAA,GAAG,CAACG,SAAJ,GAAgB,UAASC,EAAT,EAAaC,UAAb,EAAwB;EACtC;EACAA,IAAAA,UAAU,GAAG,IAAA,CAAKnB,OAAL,CAAagB,KAAb,CAAmBI,MAAnB,CAA0BD,UAA1B,CAAb,CAAA;EACA,IAAA,IAAA,CAAKnB,OAAL,CAAaD,UAAb,CAAwBmB,EAAxB,IAA8BC,UAA9B,CAAA;EACD,GAJD,CAAA;;EAKAL,EAAAA,GAAG,CAACM,MAAJ,GAAa,UAASpB,OAAT,EAAiB;EAAC;EAC7B;EACA,IAAMqB,IAAAA,KAAK,GAAG,IAAd,CAAA;;EACA,IAAA,IAAMC,GAAG,GAAG,SAASC,YAAT,CAAsBvB,OAAtB,EAA8B;EACxC,MAAKwB,IAAAA,CAAAA,KAAL,CAAWxB,OAAX,CAAA,CAAA;EACD,KAFD,CAH4B;;;EAO5BsB,IAAAA,GAAG,CAACG,SAAJ,GAAgBxB,MAAM,CAACC,MAAP,CAAcmB,KAAK,CAACI,SAApB,CAAhB,CAAA;EACAH,IAAAA,GAAG,CAACG,SAAJ,CAAcC,WAAd,GAA4BJ,GAA5B,CAAA;EACAA,IAAAA,GAAG,CAACtB,OAAJ,GAAcI,YAAY,CAACiB,KAAK,CAACrB,OAAP,EAAgBA,OAAhB,CAA1B,CAT4B;;EAU5B,IAAA,OAAOsB,GAAP,CAAA;EACD,GAXD,CAAA;EAYD;;EC5BD,IAAMK,MAAM,GAAZ,8BAAA;;EACA,IAAMC,YAAY,GAAUD,MAAAA,CAAAA,MAAAA,CAAAA,MAAV,kBAAwBA,MAAxB,EAAA,GAAA,CAAlB;;EACA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,CAAA,CAArB;;EACA,IAAMG,MAAM,GAAG,IAAID,MAAJ,gBAAmBF,YAAnB,EAAA,QAAA,CAAA,CAAf;;EACA,IAAMI,SAAS,GAAG,2EAAlB,CAAA;EACA,IAAMC,aAAa,GAAG,YAAtB,CAAA;EAGA,IAAIC,IAAI,GAAG,IAAX,CAAA;EACA,IAAIC,OAAK,GAAG,EAAZ,CAAA;;EACA,SAASC,gBAAT,CAA0BC,OAA1B,EAAmCC,KAAnC,EAA0C;EACxC,EAAO,OAAA;EACLC,IAAAA,GAAG,EAAEF,OADA;EAELG,IAAAA,IAAI,EAAE,CAFD;EAEI;EACTC,IAAAA,QAAQ,EAAE,EAHL;EAILpC,IAAAA,MAAM,EAAE,IAJH;EAKLiC,IAAAA,KAAK,EAALA,KAAAA;EALK,GAAP,CAAA;EAOD,CAAA;;EAED,SAASI,KAAT,CAAeL,OAAf,EAAwBM,UAAxB,EAAoC;EAClC,EAAItC,IAAAA,MAAM,GAAG8B,OAAK,CAACA,OAAK,CAACS,MAAN,GAAe,CAAhB,CAAlB,CAAA;EACA,EAAA,IAAIC,OAAO,GAAGT,gBAAgB,CAACC,OAAD,EAAUM,UAAV,CAA9B,CAAA;;EACA,EAAG,IAAA,CAACT,IAAJ,EAAU;EACRA,IAAAA,IAAI,GAAGW,OAAP,CAAA;EACD,GAAA;;EACD,EAAA,IAAGxC,MAAH,EAAW;EACTwC,IAAAA,OAAO,CAACxC,MAAR,GAAiBA,MAAjB,CAAA;EACAA,IAAAA,MAAM,CAACoC,QAAP,CAAgBlD,IAAhB,CAAqBsD,OAArB,CAAA,CAAA;EACD,GAAA;;EACDV,EAAAA,OAAK,CAAC5C,IAAN,CAAWsD,OAAX,CAAA,CAAA;EACD,CAAA;;EACD,SAASC,GAAT,CAAaT,OAAb,EAAsB;EACpB,EAAA,IAAIU,IAAI,GAAGZ,OAAK,CAACa,GAAN,EAAX,CAAA;;EACA,EAAA,IAAGD,IAAI,CAACR,GAAL,KAAaF,OAAhB,EAAyB;EACvB,IAAA,MAAM,IAAIY,KAAJ,CAAU,QAAV,CAAN,CAAA;EACD,GAAA;EACF,CAAA;;EACD,SAASC,KAAT,CAAeC,IAAf,EAAqB;EACnBA,EAAAA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP,CAAA;EACA,EAAI/C,IAAAA,MAAM,GAAG8B,OAAK,CAACA,OAAK,CAACS,MAAN,GAAe,CAAhB,CAAlB,CAAA;;EACA,EAAA,IAAGO,IAAH,EAAS;EACP9C,IAAAA,MAAM,CAACoC,QAAP,CAAgBlD,IAAhB,CAAqB;EACnBiD,MAAAA,IAAI,EAAE,CADa;EACV;EACTW,MAAAA,IAAI,EAAJA,IAAAA;EAFmB,KAArB,CAAA,CAAA;EAID,GAAA;EACF,CAAA;;EAEM,SAASE,SAAT,CAAmBC,IAAnB,EAAwB;EAC7BpB,EAAAA,IAAI,GAAG,IAAP,CAAA;EACAC,EAAAA,OAAK,GAAG,EAAR,CAAA;;EAEA,EAASoB,SAAAA,OAAT,CAAiBC,GAAjB,EAAsB;EACpBF,IAAAA,IAAI,GAAGA,IAAI,CAACG,SAAL,CAAeD,GAAf,CAAP,CAAA;EACD,GAAA;;EACD,EAAA,SAASE,aAAT,GAAyB;EACvB,IAAA,IAAMhB,KAAK,GAAGY,IAAI,CAACK,KAAL,CAAW9B,YAAX,CAAd,CAAA;;EACA,IAAA,IAAGa,KAAH,EAAU;EACR,MAAA,IAAMiB,KAAK,GAAG;EACZtB,QAAAA,OAAO,EAAEK,KAAK,CAAC,CAAD,CADF;EAEZJ,QAAAA,KAAK,EAAE,EAAA;EAFK,OAAd,CAAA;EAIAiB,MAAAA,OAAO,CAACb,KAAK,CAAC,CAAD,CAAL,CAASE,MAAV,CAAP,CALQ;;EAOR,MAAA,IAAIE,IAAJ,CAAA;;EACA,MAAA,IAAIc,IAAJ,CAAA;;EACA,MAAA,OAAM,EAAEd,IAAG,GAAGQ,IAAI,CAACK,KAAL,CAAW1B,aAAX,CAAR,MAAuC2B,IAAI,GAAGN,IAAI,CAACK,KAAL,CAAW3B,SAAX,CAA9C,CAAN,EAA4E;EAAE;EAC5E2B,QAAAA,KAAK,CAACrB,KAAN,CAAY/C,IAAZ,CAAiB;EACfsE,UAAAA,IAAI,EAAED,IAAI,CAAC,CAAD,CADK;EAEf5F,UAAAA,KAAK,EAAE4F,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD,CAAA;EAFlB,SAAjB,CAAA,CAAA;EAIAL,QAAAA,OAAO,CAACK,IAAI,CAAC,CAAD,CAAJ,CAAQhB,MAAT,CAAP,CAAA;EACD,OAAA;;EACD,MAAA,IAAGE,IAAH,EAAQ;EACNS,QAAAA,OAAO,CAACT,IAAG,CAAC,CAAD,CAAH,CAAOF,MAAR,CAAP,CAAA;EACD,OAAA;;EACD,MAAA,OAAOe,KAAP,CAAA;EACD,KAAA;;EACD,IAAO,OAAA,KAAP,CAvBuB;EAwBxB,GAAA;;EAED,EAAA,OAAML,IAAN,EAAY;EACV,IAAA,IAAIQ,OAAO,GAAGR,IAAI,CAACS,OAAL,CAAa,GAAb,CAAd,CAAA;;EACA,IAAGD,IAAAA,OAAO,KAAK,CAAf,EAAkB;EAChB,MAAA,IAAME,aAAa,GAAGN,aAAa,EAAnC,CADgB;;EAEhB,MAAA,IAAGM,aAAH,EAAkB;EAChBtB,QAAAA,KAAK,CAACsB,aAAa,CAAC3B,OAAf,EAAwB2B,aAAa,CAAC1B,KAAtC,CAAL,CAAA;EACA,QAAA,SAAA;EACD,OAAA;;EAED,MAAM2B,IAAAA,WAAW,GAAGX,IAAI,CAACK,KAAL,CAAW5B,MAAX,CAApB,CAPgB;;EAQhB,MAAA,IAAGkC,WAAH,EAAgB;EACdnB,QAAAA,GAAG,CAACmB,WAAW,CAAC,CAAD,CAAZ,CAAH,CAAA;EACAV,QAAAA,OAAO,CAACU,WAAW,CAAC,CAAD,CAAX,CAAerB,MAAhB,CAAP,CAAA;EACA,QAAA,SAAA;EACD,OAAA;EACF,KAAA;;EACD,IAAA,IAAIO,IAAI,GAAR,KAAA,CAAA,CAAA;;EACA,IAAGW,IAAAA,OAAO,GAAG,CAAb,EAAgB;EACdX,MAAAA,IAAI,GAAGG,IAAI,CAACG,SAAL,CAAe,CAAf,EAAkBK,OAAlB,CAAP,CAAA;EACD,KAAA;;EACD,IAAA,IAAGX,IAAH,EAAS;EACPD,MAAAA,KAAK,CAACC,IAAD,CAAL,CAAA;EACAI,MAAAA,OAAO,CAACJ,IAAI,CAACP,MAAN,CAAP,CAAA;EACD,KAAA;EACF,GAAA;;EAED,EAAA,OAAOV,IAAP,CAAA;EACD;;EC7GD,IAAMgC,YAAY,GAAG,0BAArB,CAAA;;EAGA,SAASC,QAAT,CAAkB7B,KAAlB,EAAyB;EACvB,EAAI5B,IAAAA,GAAG,GAAG,EAAV,CAAA;;EACA,EAAA,KAAI,IAAI0D,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG9B,KAAK,CAACM,MAAzB,EAAiCwB,CAAC,EAAlC,EAAsC;EACpC,IAAA,IAAIR,IAAI,GAAGtB,KAAK,CAAC8B,CAAD,CAAhB,CAAA;;EACA,IAAA,IAAGR,IAAI,CAACC,IAAL,KAAc,OAAjB,EAA0B;EAAA,MAAA,CAAA,YAAA;EACxB,QAAIQ,IAAAA,QAAQ,GAAG,EAAf,CAAA;EACAT,QAAAA,IAAI,CAAC5F,KAAL,CAAWoF,OAAX,CAAmB,qBAAnB,EAA0C,YAAU;EAClDiB,UAAAA,QAAQ,CAACC,SAAS,CAAC,CAAD,CAAV,CAAR,GAAyBA,SAAS,CAAC,CAAD,CAAlC,CAAA;EACD,SAFD,CAAA,CAAA;EAGAV,QAAAA,IAAI,CAAC5F,KAAL,GAAaqG,QAAb,CAAA;EALwB,OAAA,GAAA,CAAA;EAMzB,KAAA;;EACD3D,IAAAA,GAAG,IAAA,EAAA,CAAA,MAAA,CAAMkD,IAAI,CAACC,IAAX,EAAmBU,GAAAA,CAAAA,CAAAA,MAAAA,CAAAA,IAAI,CAACC,SAAL,CAAeZ,IAAI,CAAC5F,KAApB,CAAnB,EAAH,GAAA,CAAA,CAAA;EACD,GAAA;;EACD,EAAW0C,OAAAA,GAAAA,CAAAA,MAAAA,CAAAA,GAAG,CAAC+D,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,CAAX,EAAA,GAAA,CAAA,CAAA;EACD,CAAA;;EAED,SAASC,GAAT,CAAaC,EAAb,EAAiB;EACf,EAAA,IAAGA,EAAE,CAACnC,IAAH,KAAY,CAAf,EAAkB;EAChB,IAAOoC,OAAAA,QAAQ,CAACD,EAAD,CAAf,CAAA;EACD,GAFD,MAEO;EACL,IAAA,IAAIxB,IAAI,GAAGwB,EAAE,CAACxB,IAAd,CAAA;;EACA,IAAA,IAAG,CAACe,YAAY,CAACW,IAAb,CAAkB1B,IAAlB,CAAJ,EAA6B;EAC3B,MAAA,OAAA,OAAA,CAAA,MAAA,CAAcA,IAAd,EAAA,KAAA,CAAA,CAAA;EACD,KAFD,MAEO;EACL,MAAI2B,IAAAA,MAAM,GAAG,EAAb,CAAA;EACA,MAAA,IAAInB,KAAJ,CAAA;EACA,MAAIoB,IAAAA,SAAS,GAAGb,YAAY,CAACa,SAAb,GAAyB,CAAzC,CAHK;;EAIL,MAAMpB,OAAAA,KAAK,GAAGO,YAAY,CAACc,IAAb,CAAkB7B,IAAlB,CAAd,EAAuC;EACrC,QAAA,IAAI8B,KAAK,GAAGtB,KAAK,CAACsB,KAAlB,CAAA;;EACA,QAAGA,IAAAA,KAAK,GAAGF,SAAX,EAAsB;EACpBD,UAAAA,MAAM,CAACvF,IAAP,CAAYgF,IAAI,CAACC,SAAL,CAAerB,IAAI,CAACsB,KAAL,CAAWM,SAAX,EAAsBE,KAAtB,CAAf,CAAZ,CAAA,CAAA;EACD,SAAA;;EACDH,QAAAA,MAAM,CAACvF,IAAP,CAAA,KAAA,CAAA,MAAA,CAAkBoE,KAAK,CAAC,CAAD,CAAL,CAASuB,IAAT,EAAlB,EAAA,GAAA,CAAA,CAAA,CALqC;;EAMrCH,QAAAA,SAAS,GAAGE,KAAK,GAAGtB,KAAK,CAAC,CAAD,CAAL,CAASf,MAA7B,CAAA;EACD,OAAA;;EACD,MAAA,IAAGmC,SAAS,GAAG5B,IAAI,CAACP,MAApB,EAA4B;EAC1BkC,QAAAA,MAAM,CAACvF,IAAP,CAAYgF,IAAI,CAACC,SAAL,CAAerB,IAAI,CAACsB,KAAL,CAAWM,SAAX,CAAf,CAAZ,CAAA,CAAA;EACD,OAAA;;EACD,MAAA,OAAA,KAAA,CAAA,MAAA,CAAaD,MAAM,CAACK,IAAP,CAAY,GAAZ,CAAb,EAAA,GAAA,CAAA,CAAA;EACD,KAAA;EACF,GAAA;EACF,CAAA;;EAED,SAASC,WAAT,CAAqBT,EAArB,EAAwB;EACtB,EAAA,IAAIlC,QAAQ,GAAGkC,EAAE,CAAClC,QAAlB,CAAA;;EACA,EAAA,IAAGA,QAAH,EAAa;EACX,IAAA,OAAOA,QAAQ,CAAC4C,GAAT,CAAa,UAAAC,CAAC,EAAA;EAAA,MAAEZ,OAAAA,GAAG,CAACY,CAAD,CAAL,CAAA;EAAA,KAAd,CAAwBH,CAAAA,IAAxB,CAA6B,GAA7B,CAAP,CAAA;EACD,GAAA;;EACD,EAAA,OAAO,KAAP,CAAA;EACD,CAAA;;EAEM,SAASP,QAAT,CAAkBD,EAAlB,EAAsB;EAC3B,EAAA,IAAIlC,QAAQ,GAAG2C,WAAW,CAACT,EAAD,CAA1B,CAAA;EACA,EAAIY,IAAAA,IAAI,GAAUZ,OAAAA,CAAAA,MAAAA,CAAAA,EAAE,CAACpC,GAAb,EACNoC,MAAAA,CAAAA,CAAAA,MAAAA,CAAAA,EAAE,CAACrC,KAAH,CAASM,MAAT,GAAkBuB,QAAQ,CAACQ,EAAE,CAACrC,KAAJ,CAA1B,GAAuC,WADjC,CAGNG,CAAAA,MAAAA,CAAAA,QAAQ,GAAOA,GAAAA,CAAAA,MAAAA,CAAAA,QAAP,CAAoB,GAAA,EAHtB,EAAR,GAAA,CAAA,CAAA;EAMA,EAAA,OAAO8C,IAAP,CAAA;EACD;;EC5DM,SAASC,iBAAT,CAA2BC,QAA3B,EAAqC;EAC1C,EAAA,IAAIvD,IAAI,GAAGmB,SAAS,CAACoC,QAAD,CAApB,CAAA;EAEA,EAAA,IAAIF,IAAI,GAAGX,QAAQ,CAAC1C,IAAD,CAAnB,CAAA;EAEA,EAAA,IAAIwD,MAAM,GAAG,IAAIC,QAAJ,CAAA,oBAAA,CAAA,MAAA,CAAkCJ,IAAlC,EAAb,GAAA,CAAA,CAAA,CAAA;EAEA,EAAA,OAAOG,MAAP,CAAA;EACD;;ECXD,IAAIE,eAAe,GAAGC,KAAK,CAACpE,SAA5B,CAAA;EACO,IAAIqE,YAAY,GAAG7F,MAAM,CAACC,MAAP,CAAc2F,KAAK,CAACpE,SAApB,CAAnB,CAAA;EAEP,IAAMsE,OAAO,GAAG,CACd,MADc,EAEd,KAFc,EAGd,SAHc,EAId,OAJc,EAKd,SALc,EAMd,QANc,EAOd,MAPc,CAAhB,CAAA;EAUAA,OAAO,CAAC3H,OAAR,CAAgB,UAAA4H,MAAM,EAAE;EACtBF,EAAAA,YAAY,CAACE,MAAD,CAAZ,GAAuB,YAAkB;EAAA,IAAA,IAAA,qBAAA,CAAA;;EAAA,IAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAANC,IAAM,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;EAANA,MAAAA,IAAM,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EAAA,KAAA;;EACvC,IAAAL,CAAAA,qBAAAA,GAAAA,eAAe,CAACI,MAAD,CAAf,EAAwBE,IAAxB,CAAA,KAAA,CAAA,qBAAA,EAAA,CAA6B,IAA7B,CAAA,CAAA,MAAA,CAAsCD,IAAtC,CAAA,CAAA,CAAA;;EACA,IAAA,IAAIE,QAAJ,CAAA;EACA,IAAIC,IAAAA,EAAE,GAAG,IAAA,CAAKC,MAAd,CAAA;;EAEA,IAAA,QAAOL,MAAP;EACE,MAAA,KAAK,MAAL,CAAA;EACA,MAAA,KAAK,SAAL;EACEG,QAAAA,QAAQ,GAAGF,IAAX,CAAA;EACA,QAAA,MAAA;;EACF,MAAA,KAAK,QAAL;EACEE,QAAAA,QAAQ,GAAGF,IAAI,CAACxB,KAAL,CAAW,CAAX,CAAX,CAAA;EACA,QAAA,MAAA;EAPJ,KAAA;;EAYA,IAAA,IAAG0B,QAAH,EAAa;EACXC,MAAAA,EAAE,CAACE,YAAH,CAAgBH,QAAhB,CAAA,CAAA;EACD,KAAA;;EAEDC,IAAAA,EAAE,CAACG,GAAH,CAAOC,MAAP,EAAA,CAAA;EACD,GAtBD,CAAA;EAuBD,CAxBD,CAAA;;ECbA,IAAItF,IAAE,GAAG,CAAT,CAAA;;MAEqBuF;EACnB,EAAa,SAAA,GAAA,GAAA;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,GAAA,CAAA,CAAA;;EACX,IAAKvF,IAAAA,CAAAA,EAAL,GAAUA,IAAE,EAAZ,CAAA;EACA,IAAA,IAAA,CAAKwF,IAAL,GAAY,EAAZ,CAFW;EAGZ,GAAA;;;;aAED,SAAQ,MAAA,GAAA;EACN,MAAGD,IAAAA,GAAG,CAACE,MAAP,EAAe;EACbF,QAAAA,GAAG,CAACE,MAAJ,CAAWC,MAAX,CAAkB,IAAlB,CAAA,CAAA;EACD,OAAA;EACF,KAAA;;;EAED,IAAA,KAAA,EAAA,SAAA,MAAA,CAAOC,OAAP,EAAe;EACb,MAAA,IAAA,CAAKH,IAAL,CAAUnH,IAAV,CAAesH,OAAf,CAAA,CAAA;EACD,KAAA;;;aAED,SAAQ,MAAA,GAAA;EACN,MAAA,IAAA,CAAKH,IAAL,CAAUtI,OAAV,CAAkB,UAAAyI,OAAO,EAAA;EAAA,QAAEA,OAAAA,OAAO,CAACC,MAAR,EAAF,CAAA;EAAA,OAAzB,CAAA,CAAA;EACD,KAAA;;;;;EAGHL,GAAG,CAACE,MAAJ,GAAa,IAAb,CAAA;EAEA,IAAIxE,KAAK,GAAG,EAAZ,CAAA;EAEO,SAAS4E,UAAT,CAAoBF,OAApB,EAA6B;EAClCJ,EAAAA,GAAG,CAACE,MAAJ,GAAaE,OAAb,CAAA;EACA1E,EAAAA,KAAK,CAAC5C,IAAN,CAAWsH,OAAX,CAAA,CAAA;EACD,CAAA;EAEM,SAASG,SAAT,GAAoB;EACzB7E,EAAAA,KAAK,CAACa,GAAN,EAAA,CAAA;EACAyD,EAAAA,GAAG,CAACE,MAAJ,GAAaxE,KAAK,CAACA,KAAK,CAACS,MAAN,GAAe,CAAhB,CAAlB,CAAA;EACD;;EC/BM,SAAS5D,OAAT,CAAiBiI,IAAjB,EAAuB;EAC5B,EAAA,IAAG,CAAChJ,QAAQ,CAACgJ,IAAD,CAAZ,EAAoB,OAAA;EAEpB,EAAA,IAAGA,IAAI,CAACZ,MAAR,EAAgB,OAAOY,IAAI,CAACZ,MAAZ,CAAA;EAEhB,EAAA,OAAO,IAAIa,QAAJ,CAAaD,IAAb,CAAP,CAAA;EACD,CAAA;;MAEKC;EACJ,EAAA,SAAA,QAAA,CAAYD,IAAZ,EAAkB;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,QAAA,CAAA,CAAA;;EAChB,IAAA,IAAA,CAAKV,GAAL,GAAW,IAAIE,GAAJ,EAAX,CAAA;EAEAxG,IAAAA,MAAM,CAACkH,cAAP,CAAsBF,IAAtB,EAA2B,QAA3B,EAAoC;EAClCjJ,MAAAA,KAAK,EAAE,IAD2B;EAElCoJ,MAAAA,UAAU,EAAE,KAAA;EAFsB,KAApC,CAAA,CAAA;;EAIA,IAAA,IAAGvB,KAAK,CAACwB,OAAN,CAAcJ,IAAd,CAAH,EAAwB;EACtBA,MAAAA,IAAI,CAACK,OAAL,GAAexB,YAAf,CAAA;EACA,MAAKQ,IAAAA,CAAAA,YAAL,CAAkBW,IAAlB,CAAA,CAAA;EACD,KAHD,MAGO;EACL,MAAKM,IAAAA,CAAAA,IAAL,CAAUN,IAAV,CAAA,CAAA;EACD,KAAA;EACF,GAAA;;;;EACD,IAAA,KAAA,EAAA,SAAA,YAAA,CAAaA,IAAb,EAAmB;EACjBA,MAAAA,IAAI,CAAC7I,OAAL,CAAa,UAAAoJ,IAAI,EAAA;EAAA,QAAExI,OAAAA,OAAO,CAACwI,IAAD,CAAT,CAAA;EAAA,OAAjB,CAAA,CAAA;EACD,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,IAAA,CAAKP,IAAL,EAAW;EACThH,MAAAA,MAAM,CAACwH,IAAP,CAAYR,IAAZ,EAAkB7I,OAAlB,CAA0B,UAAA+B,GAAG,EAAE;EAC7BgH,QAAAA,cAAc,CAACF,IAAD,EAAM9G,GAAN,EAAU8G,IAAI,CAAC9G,GAAD,CAAd,CAAd,CAAA;EACD,OAFD,CAAA,CAAA;EAGD,KAAA;;;;;;EAGH,SAASuH,WAAT,CAAqB1J,KAArB,EAA4B;EAC1B,EAAA,KAAI,IAAIoG,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGpG,KAAK,CAAC4E,MAAzB,EAAiCwB,CAAC,EAAlC,EAAsC;EACpC,IAAA,IAAIuD,OAAO,GAAG3J,KAAK,CAACoG,CAAD,CAAnB,CAAA;EACAuD,IAAAA,OAAO,CAACtB,MAAR,IAAkBsB,OAAO,CAACtB,MAAR,CAAeE,GAAf,CAAmBqB,MAAnB,EAAlB,CAAA;;EACA,IAAA,IAAG/B,KAAK,CAACwB,OAAN,CAAcM,OAAd,CAAH,EAA2B;EACzBD,MAAAA,WAAW,CAACC,OAAD,CAAX,CAAA;EACD,KAAA;EACF,GAAA;EACF,CAAA;;EAGD,SAASR,cAAT,CAAwBF,IAAxB,EAA6B9G,GAA7B,EAAiCnC,KAAjC,EAAwC;EACtC,EAAA,IAAI6J,OAAO,GAAG7I,OAAO,CAAChB,KAAD,CAArB,CAAA;EACA,EAAA,IAAIuI,GAAG,GAAG,IAAIE,GAAJ,EAAV,CAAA;EACAxG,EAAAA,MAAM,CAACkH,cAAP,CAAsBF,IAAtB,EAA2B9G,GAA3B,EAA+B;EAC7B2H,IAAAA,GAD6B,EACxB,SAAA,GAAA,GAAA;EACH,MAAGrB,IAAAA,GAAG,CAACE,MAAP,EAAe;EACbJ,QAAAA,GAAG,CAACqB,MAAJ,EAAA,CAAA;;EACA,QAAA,IAAGC,OAAH,EAAY;EACVA,UAAAA,OAAO,CAACtB,GAAR,CAAYqB,MAAZ,EAAA,CAAA;;EACA,UAAA,IAAG/B,KAAK,CAACwB,OAAN,CAAcrJ,KAAd,CAAH,EAAyB;EACvB0J,YAAAA,WAAW,CAAC1J,KAAD,CAAX,CAAA;EACD,WAAA;EACF,SAAA;EACF,OAAA;;EACD,MAAA,OAAOA,KAAP,CAAA;EACD,KAZ4B;EAa7B+J,IAAAA,GAb6B,EAazBC,SAAAA,GAAAA,CAAAA,QAbyB,EAaf;EACZ,MAAGA,IAAAA,QAAQ,KAAKhK,KAAhB,EAAuB;EACrBgB,QAAAA,OAAO,CAACgJ,QAAD,CAAP,CAAA;EACAhK,QAAAA,KAAK,GAAGgK,QAAR,CAAA;EACAzB,QAAAA,GAAG,CAACC,MAAJ,EAAA,CAAA;EACD,OAAA;EACF,KAAA;EAnB4B,GAA/B,CAAA,CAAA;EAqBD;;ECtED,IAAIyB,KAAK,GAAG,EAAZ,CAAA;EACA,IAAIC,GAAG,GAAG,EAAV,CAAA;EAEA,IAAIC,OAAO,GAAG,KAAd,CAAA;;EAEA,SAASC,oBAAT,GAA+B;EAC7B,EAAA,KAAI,IAAIhE,CAAC,GAAG,CAAZ,EAAcA,CAAC,GAAC6D,KAAK,CAACrF,MAAtB,EAA6BwB,CAAC,EAA9B,EAAkC;EAChC6D,IAAAA,KAAK,CAAC7D,CAAD,CAAL,CAASiE,GAAT,EAAA,CAAA;EACD,GAAA;;EACDJ,EAAAA,KAAK,GAAG,EAAR,CAAA;EACAC,EAAAA,GAAG,GAAG,EAAN,CAAA;EACAC,EAAAA,OAAO,GAAG,KAAV,CAAA;EACD,CAAA;;EAEM,SAASG,YAAT,CAAsBzB,OAAtB,EAA+B;EACpC,EAAA,IAAM3F,EAAE,GAAG2F,OAAO,CAAC3F,EAAnB,CAAA;;EACA,EAAA,IAAGgH,GAAG,CAAChH,EAAD,CAAH,KAAY,IAAZ,IAAoBgH,GAAG,CAAChH,EAAD,CAAH,KAAYqH,SAAnC,EAA8C;EAC5CN,IAAAA,KAAK,CAAC1I,IAAN,CAAWsH,OAAX,CAAA,CAAA;EACAqB,IAAAA,GAAG,CAAChH,EAAD,CAAH,GAAU,IAAV,CAAA;;EAEA,IAAG,IAAA,CAACiH,OAAJ,EAAa;EACX9I,MAAAA,QAAQ,CAAC+I,oBAAD,CAAR,CAAA;EACAD,MAAAA,OAAO,GAAG,IAAV,CAAA;EACD,KAAA;EACF,GAAA;EAEF;;ECzBD,IAAIjH,EAAE,GAAG,CAAT,CAAA;;MAEqBsH;EACnB,EAAA,SAAA,OAAA,CAAYC,EAAZ,EAAgBC,QAAhB,EAA0BpJ,QAA1B,EAAoCU,OAApC,EAA6C;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,OAAA,CAAA,CAAA;;EAC3C,IAAKyI,IAAAA,CAAAA,EAAL,GAAUA,EAAV,CAAA;EACA,IAAKC,IAAAA,CAAAA,QAAL,GAAgBA,QAAhB,CAAA;EACA,IAAKC,IAAAA,CAAAA,IAAL,GAAY,CAAC,CAAC3I,OAAO,CAAC2I,IAAtB,CAH2C;;EAI3C,IAAKrJ,IAAAA,CAAAA,QAAL,GAAgBA,QAAhB,CAAA;EACA,IAAKU,IAAAA,CAAAA,OAAL,GAAeA,OAAf,CAAA;EACA,IAAK4I,IAAAA,CAAAA,IAAL,GAAY,CAAC,CAAC5I,OAAO,CAAC4I,IAAtB,CAN2C;;EAO3C,IAAA,IAAA,CAAKC,KAAL,GAAa7I,OAAO,CAAC4I,IAArB,CAP2C;;EAQ3C,IAAK1H,IAAAA,CAAAA,EAAL,GAAUA,EAAE,EAAZ,CAAA;;EAGA,IAAA,IAAG,OAAOwH,QAAP,KAAoB,QAAvB,EAAiC;EAC/B,MAAKI,IAAAA,CAAAA,MAAL,GAAc,YAAU;EACtB,QAAA,IAAIC,IAAI,GAAGL,QAAQ,CAACM,KAAT,CAAe,GAAf,CAAX,CAAA;EACA,QAAIC,IAAAA,GAAG,GAAGR,EAAV,CAAA;;EACA,QAAA,KAAI,IAAIrE,CAAC,GAAG,CAAZ,EAAcA,CAAC,GAAG2E,IAAI,CAACnG,MAAvB,EAA+BwB,CAAC,EAAhC,EAAoC;EAClC6E,UAAAA,GAAG,GAAGA,GAAG,CAACF,IAAI,CAAC3E,CAAD,CAAL,CAAT,CAAA;EACD,SAAA;;EAED,QAAA,OAAO6E,GAAP,CAAA;EACD,OARD,CAAA;EASD,KAVD,MAUO;EACL,MAAKH,IAAAA,CAAAA,MAAL,GAAcJ,QAAd,CAAA;EACD,KAAA;;EAED,IAAKQ,IAAAA,CAAAA,IAAL,GAAY,EAAZ,CAAA;EACA,IAAA,IAAA,CAAKC,MAAL,GAAc,IAAIC,GAAJ,EAAd,CAAA;EAEA,IAAKpL,IAAAA,CAAAA,KAAL,GAAc,IAAA,CAAK4K,IAAL,GAAYL,SAAZ,GAAwB,IAAKT,CAAAA,GAAL,EAAtC,CA5B2C;EA6B5C,GAAA;;;;aAED,SAAK,GAAA,GAAA;EACHf,MAAAA,UAAU,CAAC,IAAD,CAAV,CAAA;EACA,MAAM/I,IAAAA,KAAK,GAAG,IAAK8K,CAAAA,MAAL,CAAY5C,IAAZ,CAAiB,IAAKuC,CAAAA,EAAtB,CAAd,CAAA;EACAzB,MAAAA,SAAS,EAAA,CAAA;EAET,MAAA,OAAOhJ,KAAP,CAAA;EACD,KAAA;;;aAED,SAAQ,MAAA,GAAA;EACN,MAAG,IAAA,IAAA,CAAK4K,IAAR,EAAc;EACZ,QAAKC,IAAAA,CAAAA,KAAL,GAAa,IAAb,CAAA;EACD,OAFD,MAEO;EACLP,QAAAA,YAAY,CAAC,IAAD,CAAZ,CADK;EAEN,OAAA;EACF,KAAA;;;aAED,SAAK,GAAA,GAAA;EACH,MAAA,IAAIN,QAAQ,GAAG,IAAKF,CAAAA,GAAL,EAAf,CAAA;EACA,MAAIuB,IAAAA,QAAQ,GAAG,IAAA,CAAKrL,KAApB,CAAA;EAEA,MAAKA,IAAAA,CAAAA,KAAL,GAAagK,QAAb,CAAA;;EAEA,MAAG,IAAA,IAAA,CAAKW,IAAR,EAAc;EACZ,QAAKrJ,IAAAA,CAAAA,QAAL,CAAc4G,IAAd,CAAmB,KAAKuC,EAAxB,EAA4BT,QAA5B,EAAsCqB,QAAtC,CAAA,CAAA;EACD,OAAA;EACF,KAAA;;;EAED,IAAA,KAAA,EAAA,SAAA,MAAA,CAAO9C,GAAP,EAAY;EACV,MAAA,IAAIrF,EAAE,GAAGqF,GAAG,CAACrF,EAAb,CAAA;;EACA,MAAG,IAAA,CAAC,KAAKiI,MAAL,CAAYjB,GAAZ,CAAgBhH,EAAhB,CAAJ,EAAyB;EACvB,QAAA,IAAA,CAAKiI,MAAL,CAAYG,GAAZ,CAAgBpI,EAAhB,CAAA,CAAA;EACA,QAAA,IAAA,CAAKgI,IAAL,CAAU3J,IAAV,CAAegH,GAAf,CAAA,CAAA;EACAA,QAAAA,GAAG,CAACgD,MAAJ,CAAW,IAAX,CAAA,CAAA;EACD,OAAA;EACF,KAAA;;;aAED,SAAS,OAAA,GAAA;EACP,MAAA,IAAA,CAAKV,KAAL,GAAa,KAAb,CADO;;EAEP,MAAA,IAAA,CAAK7K,KAAL,GAAa,IAAA,CAAK8J,GAAL,EAAb,CAFO;EAGR,KAAA;;;aAED,SAAQ,MAAA,GAAA;EACN,MAAA,IAAI1D,CAAC,GAAG,IAAK8E,CAAAA,IAAL,CAAUtG,MAAlB,CAAA;;EACA,MAAMwB,OAAAA,CAAC,EAAP,EAAW;EACT,QAAA,IAAA,CAAK8E,IAAL,CAAU9E,CAAV,CAAawD,CAAAA,MAAb,GADS;EAEV,OAAA;EACF,KAAA;;;;;;EC9EI,SAAS4B,UAAT,CAAoB1I,GAApB,EAAyB;EAC9BA,EAAAA,GAAG,CAACW,SAAJ,CAAcgI,MAAd,GAAuB,UAAStJ,GAAT,EAAcuJ,OAAd,EAAqC;EAAA,IAAd1J,IAAAA,OAAc,uEAAJ,EAAI,CAAA;EAC1DA,IAAAA,OAAO,CAAC2I,IAAR,GAAe,IAAf,CAD0D;;EAE1D,IAAIH,IAAAA,OAAJ,CAAY,IAAZ,EAAkBrI,GAAlB,EAAuBuJ,OAAvB,EAA+B1J,OAA/B,CAAA,CAAA;EACD,GAHD,CAAA;EAID,CAAA;EAEM,SAAS2J,SAAT,CAAmBlB,EAAnB,EAAuB;EAC5B,EAAA,IAAMmB,IAAI,GAAGnB,EAAE,CAACoB,QAAhB,CAAA;;EACA,EAAGD,IAAAA,IAAI,CAAC3C,IAAR,EAAc;EACZ6C,IAAAA,QAAQ,CAACrB,EAAD,CAAR,CAAA;EACD,GAAA;;EACD,EAAGmB,IAAAA,IAAI,CAACG,QAAR,EAAkB;EAChBC,IAAAA,YAAY,CAACvB,EAAD,EAAKmB,IAAI,CAACG,QAAV,CAAZ,CAAA;EACD,GAAA;;EACD,EAAGH,IAAAA,IAAI,CAACK,KAAR,EAAe;EACbC,IAAAA,SAAS,CAACzB,EAAD,EAAKmB,IAAI,CAACK,KAAV,CAAT,CAAA;EACD,GAAA;EACF,CAAA;;EAED,SAASD,YAAT,CAAsBvB,EAAtB,EAA0BsB,QAA1B,EAAmC;EACjC,EAAA,IAAMI,QAAQ,GAAG1B,EAAE,CAAC2B,iBAAH,GAAuB,EAAxC,CAAA;;EACA,EAAA,KAAI,IAAIjK,GAAR,IAAe4J,QAAf,EAAyB;EACvB,IAAA,IAAMM,OAAO,GAAGN,QAAQ,CAAC5J,GAAD,CAAxB,CAAA;EACA,IAAI2I,IAAAA,MAAM,GAAG,OAAOuB,OAAP,KAAmB,UAAnB,GAAgCA,OAAhC,GAA0CA,OAAO,CAACvC,GAA/D,CAAA;EAEAqC,IAAAA,QAAQ,CAAChK,GAAD,CAAR,GAAgB,IAAIqI,OAAJ,CAAYC,EAAZ,EAAgBK,MAAhB,EAAwB,YAAI,EAA5B,EAA+B;EAACF,MAAAA,IAAI,EAAE,IAAA;EAAP,KAA/B,CAAhB,CAJuB;EAMvB;;EACA0B,IAAAA,cAAc,CAAC7B,EAAD,EAAKtI,GAAL,EAAUkK,OAAV,CAAd,CAAA;EACD,GAAA;EACF,CAAA;;EAED,SAASE,oBAAT,CAA8BpK,GAA9B,EAAmC;EACjC,EAAO,OAAA,SAASqK,cAAT,GAAyB;EAC9B;EACA,IAAI3D,IAAAA,OAAO,GAAG,IAAKuD,CAAAA,iBAAL,CAAuBjK,GAAvB,CAAd,CAF8B;;EAK9B,IAAG0G,IAAAA,OAAO,CAACgC,KAAX,EAAkB;EAChBhC,MAAAA,OAAO,CAAC4D,OAAR,EAAA,CAAA;EACD,KAP6B;;;EAU9B,IAAGhE,IAAAA,GAAG,CAACE,MAAP,EAAe;EACbE,MAAAA,OAAO,CAACe,MAAR,EAAA,CAAA;EACD,KAAA;;EAED,IAAOf,OAAAA,OAAO,CAAC7I,KAAf,CAAA;EACD,GAfD,CAAA;EAgBD,CAAA;;EAED,IAAI0M,aAAa,GAAG,EAApB,CAAA;;EACA,SAASJ,cAAT,CAAwB7B,EAAxB,EAA4BtI,GAA5B,EAAiCkK,OAAjC,EAA0C;EACxC,EAAA,IAAG,OAAOA,OAAP,KAAmB,UAAtB,EAAkC;EAChCK,IAAAA,aAAa,CAAC5C,GAAd,GAAoByC,oBAAoB,CAACpK,GAAD,CAAxC,CAAA;EACD,GAFD,MAEO;EACLuK,IAAAA,aAAa,CAAC5C,GAAd,GAAoByC,oBAAoB,CAACpK,GAAD,CAAxC,CAAA;EACAuK,IAAAA,aAAa,CAAC3C,GAAd,GAAoBsC,OAAO,CAACtC,GAA5B,CAAA;EACD,GAAA;;EACD9H,EAAAA,MAAM,CAACkH,cAAP,CAAsBsB,EAAtB,EAA0BtI,GAA1B,EAA+BuK,aAA/B,CAAA,CAAA;EACD,CAAA;;EAED,SAASR,SAAT,CAAmBzB,EAAnB,EAAuBwB,KAAvB,EAA8B;EAC5B,EAAA,KAAI,IAAI9J,GAAR,IAAe8J,KAAf,EAAsB;EACpB,IAAA,IAAIP,OAAO,GAAGO,KAAK,CAAC9J,GAAD,CAAnB,CAAA;;EACA,IAAA,IAAG0F,KAAK,CAACwB,OAAN,CAAcqC,OAAd,CAAH,EAA2B;EAAE;EAC3B,MAAA,KAAI,IAAItF,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGsF,OAAO,CAAC9G,MAA3B,EAAmCwB,CAAC,EAApC,EAAwC;EACtCuG,QAAAA,aAAa,CAAClC,EAAD,EAAKtI,GAAL,EAAUuJ,OAAO,CAACtF,CAAD,CAAjB,CAAb,CAAA;EACD,OAAA;EACF,KAJD,MAIO;EAAE;EACPuG,MAAAA,aAAa,CAAClC,EAAD,EAAKtI,GAAL,EAAUuJ,OAAV,CAAb,CAAA;EACD,KAAA;EACF,GAAA;EACF,CAAA;;EAED,SAASiB,aAAT,CAAuBlC,EAAvB,EAA2BtI,GAA3B,EAAgCuJ,OAAhC,EAAwC;EACtC,EAAA,OAAOjB,EAAE,CAACgB,MAAH,CAAUtJ,GAAV,EAAeuJ,OAAf,CAAP,CAAA;EACD,CAAA;;EAED,SAASI,QAAT,CAAkBrB,EAAlB,EAAsB;EACpB,EAAA,IAAIxB,IAAI,GAAGwB,EAAE,CAACoB,QAAH,CAAY5C,IAAvB,CAAA;EAEAA,EAAAA,IAAI,GAAGwB,EAAE,CAACmC,KAAH,GAAW7M,UAAU,CAACkJ,IAAD,CAAV,GAAmBA,IAAI,CAACf,IAAL,CAAUuC,EAAV,CAAnB,GAAmCxB,IAArD,CAAA;;EAEA,EAAA,KAAI,IAAI9G,GAAR,IAAe8G,IAAf,EAAqB;EACnB4D,IAAAA,KAAK,CAACpC,EAAD,EAAI,OAAJ,EAAYtI,GAAZ,CAAL,CAAA;EACD,GAAA;;EAEDnB,EAAAA,OAAO,CAACiI,IAAD,CAAP,CAAA;EACD,CAAA;;EAED,SAAS4D,KAAT,CAAepC,EAAf,EAAkBqC,MAAlB,EAAyB3K,GAAzB,EAA8B;EAC5BF,EAAAA,MAAM,CAACkH,cAAP,CAAsBsB,EAAtB,EAAyBtI,GAAzB,EAA6B;EAC3B2H,IAAAA,GAD2B,EACtB,SAAA,GAAA,GAAA;EACH,MAAA,OAAOW,EAAE,CAACqC,MAAD,CAAF,CAAW3K,GAAX,CAAP,CAAA;EACD,KAH0B;EAI3B4H,IAAAA,GAJ2B,EAIvBC,SAAAA,GAAAA,CAAAA,QAJuB,EAIb;EACZS,MAAAA,EAAE,CAACqC,MAAD,CAAF,CAAW3K,GAAX,IAAkB6H,QAAlB,CAAA;EACD,KAAA;EAN0B,GAA7B,CAAA,CAAA;EAQD;;EC1GM,SAAS+C,KAAT,CAAeC,QAAf,EAAyBC,KAAzB,EAA+B;EACpC,EAAG,IAAA,CAACD,QAAJ,EAAc;EACZ,IAAA,OAAOE,SAAS,CAACD,KAAD,CAAhB,CADY;EAEb,GAAA;;EACD,EAAA,IAAGD,QAAQ,CAACG,QAAT,KAAsB,CAAzB,EAA4B;EAAE;EAC5B;EAEA,IAAA,IAAMC,QAAQ,GAAGJ,QAAQ,CAACK,UAA1B,CAAA;EAEA,IAAA,IAAIC,GAAG,GAAGJ,SAAS,CAACD,KAAD,CAAnB,CAL0B;;EAM1BG,IAAAA,QAAQ,CAACG,YAAT,CAAsBD,GAAtB,EAA2BN,QAAQ,CAACQ,WAApC,CAAA,CAAA;EAEAJ,IAAAA,QAAQ,CAACK,WAAT,CAAqBT,QAArB,CAAA,CAAA;EAEA,IAAA,OAAOM,GAAP,CAAA;EACD,GAXD,MAWO;EACL;EACA,IAAA,IAAGN,QAAQ,CAACzI,GAAT,KAAiB0I,KAAK,CAAC1I,GAA1B,EAA+B;EAC7B;EACA,MAAA,OAAOyI,QAAQ,CAACrG,EAAT,CAAY0G,UAAZ,CAAuBK,YAAvB,CAAoCR,SAAS,CAACD,KAAD,CAA7C,EAAsDD,QAAQ,CAACrG,EAA/D,CAAP,CAAA;EACD,KALI;EAQL;;;EACA,IAAIA,IAAAA,EAAE,GAAGsG,KAAK,CAACtG,EAAN,GAAWqG,QAAQ,CAACrG,EAA7B,CATK;;EAYLgH,IAAAA,UAAU,CAACV,KAAD,EAAQD,QAAQ,CAAC/D,IAAjB,CAAV,CAZK;;EAeL,IAAA,IAAGgE,KAAK,CAAC1I,GAAN,KAAcgG,SAAjB,EAA4B;EAAE;EAC5B,MAAA,IAAGyC,QAAQ,CAAC7H,IAAT,KAAkB8H,KAAK,CAAC9H,IAA3B,EAAiC;EAC/BwB,QAAAA,EAAE,CAACzF,WAAH,GAAiB+L,KAAK,CAAC9H,IAAvB,CAAA;EACD,OAHyB;;;EAK1B,MAAA,OAAA;EACD,KAAA;;EAED,IAAA,IAAIyI,WAAW,GAAGZ,QAAQ,CAACvI,QAAT,IAAqB,EAAvC,CAAA;EACA,IAAA,IAAIoJ,WAAW,GAAGZ,KAAK,CAACxI,QAAN,IAAkB,EAApC,CAAA;;EAEA,IAAGmJ,IAAAA,WAAW,CAAChJ,MAAZ,GAAqB,CAArB,IAA0BiJ,WAAW,CAACjJ,MAAZ,GAAqB,CAAlD,EAAqD;EACnD;EACA;EACAkJ,MAAAA,aAAa,CAACnH,EAAD,EAAKiH,WAAL,EAAkBC,WAAlB,CAAb,CAAA;EACD,KAJD,MAIO,IAAIA,WAAW,CAACjJ,MAAZ,GAAqB,CAAzB,EAA4B;EAAE;EACnC,MAAA,KAAI,IAAIwB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGyH,WAAW,CAACjJ,MAA/B,EAAuCwB,CAAC,EAAxC,EAA4C;EAC1C;EACA,QAAI9D,IAAAA,KAAK,GAAG4K,SAAS,CAACW,WAAW,CAACzH,CAAD,CAAZ,CAArB,CAAA;EACAO,QAAAA,EAAE,CAACoH,WAAH,CAAezL,KAAf,CAAA,CAAA;EACD,OAAA;EACF,KANM,MAMA,IAAIsL,WAAW,CAAChJ,MAAZ,GAAqB,CAAzB,EAA4B;EAAE;EACnC;EACA+B,MAAAA,EAAE,CAACqH,SAAH,GAAe,EAAf,CAAA;EACD,KAAA;EACF,GAAA;EACF;;EAGD,SAASC,WAAT,CAAqBjB,QAArB,EAA+BkB,QAA/B,EAAyC;EACvC,EAAA,OAAQlB,QAAQ,CAACzI,GAAT,KAAiB2J,QAAQ,CAAC3J,GAA3B,IAAoCyI,QAAQ,CAAC7K,GAAT,KAAiB+L,QAAQ,CAAC/L,GAArE,CAAA;EACD,CAAA;;EAED,SAAS2L,aAAT,CAAuBnH,EAAvB,EAA2BiH,WAA3B,EAAwCC,WAAxC,EAAqD;EACnD,EAAIM,IAAAA,aAAa,GAAG,CAApB,CAAA;EACA,EAAA,IAAIC,aAAa,GAAGR,WAAW,CAAC,CAAD,CAA/B,CAAA;EACA,EAAA,IAAIS,WAAW,GAAGT,WAAW,CAAChJ,MAAZ,GAAqB,CAAvC,CAAA;EACA,EAAI0J,IAAAA,WAAW,GAAGV,WAAW,CAACA,WAAW,CAAChJ,MAAZ,GAAqB,CAAtB,CAA7B,CAAA;EAEA,EAAI2J,IAAAA,aAAa,GAAG,CAApB,CAAA;EACA,EAAA,IAAIC,aAAa,GAAGX,WAAW,CAAC,CAAD,CAA/B,CAAA;EACA,EAAA,IAAIY,WAAW,GAAGZ,WAAW,CAACjJ,MAAZ,GAAqB,CAAvC,CAAA;EACA,EAAI8J,IAAAA,WAAW,GAAGb,WAAW,CAACA,WAAW,CAACjJ,MAAZ,GAAqB,CAAtB,CAA7B,CATmD;;EAYnD,EAAA,OAAMuJ,aAAa,IAAIE,WAAjB,IAAgCE,aAAa,IAAIE,WAAvD,EAAoE;EAClE;EACA,IAAA,IAAGR,WAAW,CAACG,aAAD,EAAgBI,aAAhB,CAAd,EAA8C;EAAE;EAC9CzB,MAAAA,KAAK,CAACqB,aAAD,EAAgBI,aAAhB,CAAL,CAAA;EACAJ,MAAAA,aAAa,GAAGR,WAAW,CAAC,EAAEO,aAAH,CAA3B,CAAA;EACAK,MAAAA,aAAa,GAAGX,WAAW,CAAC,EAAEU,aAAH,CAA3B,CAAA;EACD,KAJD,MAIO,IAAGN,WAAW,CAACK,WAAD,EAAcI,WAAd,CAAd,EAA0C;EAAE;EACjD3B,MAAAA,KAAK,CAACuB,WAAD,EAAcI,WAAd,CAAL,CAAA;EACAJ,MAAAA,WAAW,GAAGV,WAAW,CAAC,EAAES,WAAH,CAAzB,CAAA;EACAK,MAAAA,WAAW,GAAGb,WAAW,CAAC,EAAEY,WAAH,CAAzB,CAAA;EACD,KAJM,MAIA,IAAIR,WAAW,CAACG,aAAD,EAAgBM,WAAhB,CAAf,EAA6C;EAAE;EACpD3B,MAAAA,KAAK,CAACqB,aAAD,EAAgBM,WAAhB,CAAL,CAAA;EACA/H,MAAAA,EAAE,CAAC4G,YAAH,CAAgBa,aAAa,CAACzH,EAA9B,EAAkC2H,WAAW,CAAC3H,EAAZ,CAAe6G,WAAjD,CAAA,CAAA;EACAY,MAAAA,aAAa,GAAGR,WAAW,CAAC,EAAEO,aAAH,CAA3B,CAAA;EACAO,MAAAA,WAAW,GAAGb,WAAW,CAAC,EAAEY,WAAH,CAAzB,CAAA;EACD,KALM,MAKA,IAAGR,WAAW,CAACK,WAAD,EAAcE,aAAd,CAAd,EAA4C;EAAE;EACnDzB,MAAAA,KAAK,CAACuB,WAAD,EAAcE,aAAd,CAAL,CAAA;EACA7H,MAAAA,EAAE,CAAC4G,YAAH,CAAgBe,WAAW,CAAC3H,EAA5B,EAAgCyH,aAAa,CAACzH,EAA9C,CAAA,CAAA;EACA2H,MAAAA,WAAW,GAAGV,WAAW,CAAC,EAAES,WAAH,CAAzB,CAAA;EACAG,MAAAA,aAAa,GAAGX,WAAW,CAAC,EAAEU,aAAH,CAA3B,CAAA;EACD,KAAA;EACF,GAjCkD;;;EAoCnD,EAAGA,IAAAA,aAAa,IAAIE,WAApB,EAAiC;EAC/B,IAAI,KAAA,IAAIrI,CAAC,GAAGmI,aAAZ,EAA2BnI,CAAC,IAAIqI,WAAhC,EAA6CrI,CAAC,EAA9C,EAAkD;EAChD;EACA;EAEA;EACA,MAAIuI,IAAAA,MAAM,GAAGd,WAAW,CAACY,WAAW,GAAG,CAAf,CAAX,IAAgC,IAAhC,GAAuC,IAAvC,GAA8CZ,WAAW,CAACY,WAAW,GAAG,CAAf,CAAX,CAA6B9H,EAAxF,CAAA;EACAA,MAAAA,EAAE,CAAC4G,YAAH,CAAgBL,SAAS,CAACW,WAAW,CAACzH,CAAD,CAAZ,CAAzB,EAA2CuI,MAA3C,CAAA,CAAA;EACD,KAAA;EACF,GA7CkD;;;EAgDnD,EAAGR,IAAAA,aAAa,IAAIE,WAApB,EAAiC;EAC/B,IAAI,KAAA,IAAIjI,EAAC,GAAG+H,aAAZ,EAA2B/H,EAAC,IAAIiI,WAAhC,EAA6CjI,EAAC,EAA9C,EAAkD;EAChDO,MAAAA,EAAE,CAAC8G,WAAH,CAAeG,WAAW,CAACxH,EAAD,CAAX,CAAeO,EAA9B,CAAA,CAAA;EACD,KAAA;EACF,GAAA;EAEF;;;EAGD,SAASgH,UAAT,CAAoBV,KAApB,EAAyC;EAAA,EAAd2B,IAAAA,QAAc,uEAAH,EAAG,CAAA;EACvC,EAAA,IAAIC,QAAQ,GAAG5B,KAAK,CAAChE,IAAN,IAAc,EAA7B,CAAA;EACA,EAAA,IAAItC,EAAE,GAAGsG,KAAK,CAACtG,EAAf,CAFuC;;EAKvC,EAAA,IAAImI,QAAQ,GAAGD,QAAQ,CAACE,KAAT,IAAkB,EAAjC,CAAA;EACA,EAAA,IAAIC,QAAQ,GAAGJ,QAAQ,CAACG,KAAT,IAAkB,EAAjC,CAAA;;EACA,EAAA,KAAI,IAAI5M,GAAR,IAAe6M,QAAf,EAAyB;EACvB,IAAA,IAAG,CAACF,QAAQ,CAAC3M,GAAD,CAAZ,EAAmB;EAAE;EACnBwE,MAAAA,EAAE,CAACoI,KAAH,CAAS5M,GAAT,IAAgB,EAAhB,CAAA;EACD,KAAA;EACF,GAAA;;EAED,EAAA,KAAI,IAAIA,IAAR,IAAeyM,QAAf,EAAyB;EACvB,IAAA,IAAG,CAACC,QAAQ,CAAC1M,IAAD,CAAZ,EAAmB;EACjBwE,MAAAA,EAAE,CAACsI,eAAH,CAAmB9M,IAAnB,CAAA,CAAA;EACD,KAAA;EACF,GAAA;;EAED,EAAA,KAAI,IAAIA,KAAR,IAAe0M,QAAf,EAAyB;EACvB,IAAG1M,IAAAA,KAAG,KAAK,OAAX,EAAoB;EAClB,MAAA,KAAI,IAAI+M,SAAR,IAAqBL,QAAQ,CAACE,KAA9B,EAAqC;EACnCpI,QAAAA,EAAE,CAACoI,KAAH,CAASG,SAAT,CAAsBL,GAAAA,QAAQ,CAACE,KAAT,CAAeG,SAAf,CAAtB,CAAA;EACD,OAAA;EACF,KAJD,MAIO;EACLjC,MAAAA,KAAK,CAACtG,EAAN,CAASwI,YAAT,CAAsBhN,KAAtB,EAA2B0M,QAAQ,CAAC1M,KAAD,CAAnC,CAAA,CAAA;EACD,KAAA;EACF,GAAA;EACF,CAAA;;EAGD,SAASiN,iBAAT,CAAyBnC,KAAzB,EAA+B;EAC7B,EAAA,IAAI7G,CAAC,GAAG6G,KAAK,CAAChE,IAAd,CAD6B;EAG7B;;EACA,EAAA,IAAG,CAAC7C,CAAC,GAAGA,CAAC,CAACtE,IAAP,MAAiBsE,CAAC,GAAGA,CAAC,CAACiJ,IAAvB,CAAH,EAAiC;EAC/BjJ,IAAAA,CAAC,CAAC6G,KAAD,CAAD,CAD+B;EAEhC,GAAA;;EACD,EAAGA,IAAAA,KAAK,CAACqC,iBAAT,EAA4B;EAAC;EAC3B,IAAA,OAAO,IAAP,CAAA;EACD,GAAA;EACF,CAAA;;EAEM,SAASpC,SAAT,CAAmBD,KAAnB,EAA0B;EAC/B,EAAA,IACE1I,GADF,GAMI0I,KANJ,CACE1I,GADF,CAAA;EAAA,MAMI0I,KANJ,CAEEhE,IAFF,CAAA;EAAA,UAGExE,QAHF,GAMIwI,KANJ,CAGExI,QAHF,CAAA;EAAA,MAIEU,IAJF,GAMI8H,KANJ,CAIE9H,IAJF,CAAA;EAAA,MAMI8H,KANJ,CAKExC,GALF;;EAQA,EAAA,IAAG,OAAOlG,GAAP,KAAe,QAAlB,EAA4B;EAAE;EAC5B,IAAA,IAAG6K,iBAAe,CAACnC,KAAD,CAAlB,EAA2B;EACzB;EACA,MAAA,OAAOA,KAAK,CAACqC,iBAAN,CAAwBC,GAA/B,CAAA;EACD,KAAA;;EAEDtC,IAAAA,KAAK,CAACtG,EAAN,GAAW7F,QAAQ,CAAC0O,aAAT,CAAuBjL,GAAvB,CAAX,CAAA;EACAoJ,IAAAA,UAAU,CAACV,KAAD,CAAV,CAAA;EAEAxI,IAAAA,QAAQ,CAACrE,OAAT,CAAiB,UAAAkC,KAAK,EAAE;EACtB2K,MAAAA,KAAK,CAACtG,EAAN,CAASoH,WAAT,CAAqBb,SAAS,CAAC5K,KAAD,CAA9B,CAAA,CAAA;EACD,KAFD,CAAA,CAAA;EAGD,GAZD,MAYO;EACL2K,IAAAA,KAAK,CAACtG,EAAN,GAAW7F,QAAQ,CAACC,cAAT,CAAwBoE,IAAxB,CAAX,CAAA;EACD,GAAA;;EAED,EAAO8H,OAAAA,KAAK,CAACtG,EAAb,CAAA;EACD;;ECxLM,SAAS8I,cAAT,CAAwB3M,GAAxB,EAA6B;EAClCA,EAAAA,GAAG,CAACW,SAAJ,CAAciM,OAAd,GAAwB,UAASzC,KAAT,EAAgB;EACtC;EACA,IAAMxC,IAAAA,EAAE,GAAG,IAAX,CAAA;EACAA,IAAAA,EAAE,CAAC8E,GAAH,GAASxC,KAAK,CAACtC,EAAE,CAAC8E,GAAJ,EAAStC,KAAT,CAAd,CAAA;EACD,GAJD,CAAA;;EAKAnK,EAAAA,GAAG,CAACW,SAAJ,CAAckM,SAAd,GAA0BtO,QAA1B,CAAA;EACD,CAAA;EAEM,SAASuO,cAAT,CAAwBnF,EAAxB,EAA4B9D,EAA5B,EAAgC;EACrC;EACA,EAAA,IAAIkJ,eAAe,GAAG,SAAlBA,eAAkB,GAAM;EAC1B;EACApF,IAAAA,EAAE,CAACiF,OAAH,CAAWjF,EAAE,CAACqF,OAAH,EAAX,CAAA,CAF0B;EAI1B;;EACD,GALD,CAAA;;EAOAC,EAAAA,QAAQ,CAACtF,EAAD,EAAK,aAAL,CAAR,CAAA;EACA,EAAA,IAAID,OAAJ,CAAYC,EAAZ,EAAgBoF,eAAhB,EAAiC,YAAI;EACnCG,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAA,CAAA;EACD,GAFD,EAEG,IAFH,CAAA,CAVqC;;EAarCF,EAAAA,QAAQ,CAACtF,EAAD,EAAK,SAAL,CAAR,CAAA;EACD;;ECvBM,SAASyF,SAAT,CAAmBpN,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACW,SAAJ,CAAcD,KAAd,GAAsB,UAASxB,OAAT,EAAkB;EACtC,IAAMyI,IAAAA,EAAE,GAAG,IAAX,CAAA;EACAA,IAAAA,EAAE,CAACoB,QAAH,GAAczJ,YAAY,CAACqI,EAAE,CAAC/G,WAAH,CAAe1B,OAAhB,EAAyBA,OAAzB,CAA1B,CAAA;EAEA+N,IAAAA,QAAQ,CAACtF,EAAD,EAAK,cAAL,CAAR,CAAA;EACAkB,IAAAA,SAAS,CAAClB,EAAD,CAAT,CAAA;EACAsF,IAAAA,QAAQ,CAACtF,EAAD,EAAK,SAAL,CAAR,CAAA;;EAEA,IAAA,IAAGA,EAAE,CAACoB,QAAH,CAAYlF,EAAf,EAAmB;EACjB8D,MAAAA,EAAE,CAAC0F,MAAH,CAAU1F,EAAE,CAACoB,QAAH,CAAYlF,EAAtB,CAAA,CAAA;EACD,KAAA;EAEF,GAZD,CAAA;;EAcA7D,EAAAA,GAAG,CAACW,SAAJ,CAAc0M,MAAd,GAAuB,UAASxJ,EAAT,EAAa;EAClC,IAAM8D,IAAAA,EAAE,GAAG,IAAX,CAAA;EACA,IAAA,IAAMzI,OAAO,GAAGyI,EAAE,CAACoB,QAAnB,CAAA;EACAlF,IAAAA,EAAE,GAAG7F,QAAQ,CAACsP,aAAT,CAAuBzJ,EAAvB,CAAL,CAAA;EACA8D,IAAAA,EAAE,CAAC8E,GAAH,GAAS5I,EAAT,CAAA;;EAEA,IAAA,IAAG,CAAC3E,OAAO,CAAC0F,MAAZ,EAAoB;EAClB,MAAA,IAAID,QAAQ,GAAGzF,OAAO,CAACyF,QAAvB,CAAA;;EACA,MAAA,IAAG,CAACA,QAAD,IAAad,EAAhB,EAAoB;EAClBc,QAAAA,QAAQ,GAAGd,EAAE,CAAC0J,SAAd,CAAA;EACD,OAAA;;EACD,MAAA,IAAI3I,MAAM,GAAGF,iBAAiB,CAACC,QAAD,CAA9B,CAAA;EACAzF,MAAAA,OAAO,CAAC0F,MAAR,GAAiBA,MAAjB,CAAA;EACD,KAAA;;EAEDkI,IAAAA,cAAc,CAACnF,EAAD,CAAd,CAfkC;EAgBnC,GAhBD,CAAA;EAiBD,CAAA;EAEM,SAASsF,QAAT,CAAkBtF,EAAlB,EAAsB3I,IAAtB,EAA2B;EAChC,EAAA,IAAMwO,QAAQ,GAAG7F,EAAE,CAACoB,QAAH,CAAY/J,IAAZ,CAAjB,CAAA;;EACA,EAAA,IAAGwO,QAAH,EAAa;EACX,IAAA,KAAI,IAAIlK,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGkK,QAAQ,CAAC1L,MAA5B,EAAoCwB,CAAC,EAArC,EAAyC;EACvCkK,MAAAA,QAAQ,CAAClK,CAAD,CAAR,CAAY8B,IAAZ,CAAiBuC,EAAjB,CAAA,CAAA;EACD,KAAA;EACF,GAAA;EACF;;EC5CM,SAAS+E,aAAT,CAAuB/E,EAAvB,EAA2BlG,GAA3B,EAAuD;EAAA,EAAvB0E,IAAAA,IAAuB,uEAAhB,EAAgB,CAAA;;EAAA,EAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAATxE,QAAS,GAAA,IAAA,KAAA,CAAA,IAAA,GAAA,CAAA,GAAA,IAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;EAATA,IAAAA,QAAS,CAAA,IAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EAAA,GAAA;;EAC5D;EACA,EAAA,IAAGhC,aAAa,CAAC8B,GAAD,CAAhB,EAAuB;EACrB,IAAA,OAAO0I,KAAK,CAACxC,EAAD,EAAIlG,GAAJ,EAAQ0E,IAAR,EAAaA,IAAI,CAAC9G,GAAlB,EAAsBsC,QAAtB,EAA+B8F,SAA/B,CAAZ,CAAA;EACD,GAFD,MAEO;EACL,IAAMgG,IAAAA,IAAI,GAAG9F,EAAE,CAACoB,QAAH,CAAY9J,UAAZ,CAAuBwC,GAAvB,CAAb,CAAA;EACA,IAAA,OAAO6K,eAAe,CAAC3E,EAAD,EAAIlG,GAAJ,EAAQ0E,IAAR,EAAaA,IAAI,CAAC9G,GAAlB,EAAsBsC,QAAtB,EAA+B8L,IAA/B,CAAtB,CAAA;EACD,GAAA;EACF;;EAED,SAASnB,eAAT,CAAyB3E,EAAzB,EAA4BlG,GAA5B,EAAgC0E,IAAhC,EAAqC9G,GAArC,EAAyCsC,QAAzC,EAAkD8L,IAAlD,EAAwD;EACtD,EAAA,IAAGtQ,QAAQ,CAACsQ,IAAD,CAAX,EAAmB;EACjBA,IAAAA,IAAI,GAAG9F,EAAE,CAACoB,QAAH,CAAY7I,KAAZ,CAAkBI,MAAlB,CAAyBmN,IAAzB,CAAP,CAAA;EACD,GAAA;;EACDtH,EAAAA,IAAI,CAACnH,IAAL,GAAY;EAAE;EACZuN,IAAAA,IADU,EACLpC,SAAAA,IAAAA,CAAAA,KADK,EACC;EACT,MAAIxC,IAAAA,EAAE,GAAGwC,KAAK,CAACqC,iBAAN,GAA0B,IAAIiB,IAAJ,CAAS;EAACC,QAAAA,YAAY,EAAE,IAAA;EAAf,OAAT,CAAnC,CADS;;EAET/F,MAAAA,EAAE,CAAC0F,MAAH,EAAA,CAAA;EACD,KAAA;EAJS,GAAZ,CAAA;EAMA,EAAA,OAAOlD,KAAK,CAACxC,EAAD,EAAA,gBAAA,CAAA,MAAA,CAAsBlG,GAAtB,CAAA,EAA6B0E,IAA7B,EAAmC9G,GAAnC,EAAwCoI,SAAxC,EAAkDA,SAAlD,EAA6D;EAACgG,IAAAA,IAAI,EAAJA,IAAD;EAAM9L,IAAAA,QAAQ,EAARA,QAAAA;EAAN,GAA7D,CAAZ,CAAA;EACD,CAAA;;EAEM,SAASgM,iBAAT,CAA2BhG,EAA3B,EAA+BtF,IAA/B,EAAoC;EACzC,EAAA,OAAO8H,KAAK,CAACxC,EAAD,EAAIF,SAAJ,EAAcA,SAAd,EAAwBA,SAAxB,EAAkCA,SAAlC,EAA4CpF,IAA5C,CAAZ,CAAA;EACD,CAAA;;EACD,SAAS8H,KAAT,CAAexC,EAAf,EAAmBlG,GAAnB,EAAuB0E,IAAvB,EAA4B9G,GAA5B,EAAgCsC,QAAhC,EAAyCU,IAAzC,EAA+CuL,gBAA/C,EAAiE;EAC/D,EAAO,OAAA;EACLjG,IAAAA,EAAE,EAAFA,EADK;EAELlG,IAAAA,GAAG,EAAHA,GAFK;EAGL0E,IAAAA,IAAI,EAAJA,IAHK;EAIL9G,IAAAA,GAAG,EAAHA,GAJK;EAKLsC,IAAAA,QAAQ,EAARA,QALK;EAMLU,IAAAA,IAAI,EAAJA,IANK;EAOLuL,IAAAA,gBAAgB,EAAhBA,gBAAAA;EAPK,GAAP,CAAA;EASD;;ECpCM,SAASC,WAAT,CAAqB7N,GAArB,EAAyB;EAC9BA,EAAAA,GAAG,CAACW,SAAJ,CAAcmN,EAAd,GAAmB,YAAU;EAAE;EAC7B,IAAA,OAAOpB,aAAa,CAAb,KAAA,CAAA,KAAA,CAAA,EAAA,CAAc,IAAd,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAAuBlJ,SAAvB,CAAP,CAAA,CAAA,CAAA;EACD,GAFD,CAAA;;EAGAxD,EAAAA,GAAG,CAACW,SAAJ,CAAcoN,EAAd,GAAmB,UAAS1L,IAAT,EAAc;EAAE;EACjC,IAAA,OAAOsL,iBAAiB,CAAC,IAAD,EAAOtL,IAAP,CAAxB,CAAA;EACD,GAFD,CAAA;;EAGArC,EAAAA,GAAG,CAACW,SAAJ,CAAcqN,EAAd,GAAmB,UAASC,GAAT,EAAa;EAAE;EAChC,IAAA,IAAG,OAAOA,CAAAA,GAAP,CAAe,KAAA,QAAlB,EAA4B;EAC1B,MAAA,OAAOxK,IAAI,CAACC,SAAL,CAAeuK,GAAf,CAAP,CAAA;EACD,KAAA;;EACD,IAAA,OAAOA,GAAP,CAAA;EACD,GALD,CAAA;;EAMAjO,EAAAA,GAAG,CAACW,SAAJ,CAAcqM,OAAd,GAAwB,YAAU;EAChC,IAAMrF,IAAAA,EAAE,GAAG,IAAX,CAAA;EACA,IAAI/C,IAAAA,MAAM,GAAG+C,EAAE,CAACoB,QAAH,CAAYnE,MAAzB,CAFgC;;EAIhC,IAAA,IAAIuF,KAAK,GAAGvF,MAAM,CAACQ,IAAP,CAAYuC,EAAZ,CAAZ,CAAA;EACA,IAAA,OAAOwC,KAAP,CAAA;EACD,GAND,CAAA;EAOD;;EChBD,SAASnK,GAAT,CAAad,OAAb,EAAsB;EACpB,EAAKwB,IAAAA,CAAAA,KAAL,CAAWxB,OAAX,CAAA,CAAA;EACD,CAAA;;EAEDkO,SAAS,CAACpN,GAAD,CAAT,CAAA;EACA6N,WAAW,CAAC7N,GAAD,CAAX;;EACA2M,cAAc,CAAC3M,GAAD,CAAd;;EACA0I,UAAU,CAAC1I,GAAD,CAAV;;EACAD,aAAa,CAACC,GAAD,CAAb,CAAA;EAKA,IAAIkO,WAAW,GAAf,+GAAA,CAAA;EAMA,IAAIC,GAAG,GAAG,IAAInO,GAAJ,CAAQ;EAACmG,EAAAA,IAAI,EAAC;EAACiI,IAAAA,OAAO,EAAC,aAAA;EAAT,GAAA;EAAN,CAAR,CAAV,CAAA;EACA,IAAMC,OAAO,GAAG3J,iBAAiB,CAACwJ,WAAD,CAAjC,CAAA;EACA,IAAMhE,QAAQ,GAAGmE,OAAO,CAACjJ,IAAR,CAAa+I,GAAb,CAAjB,CAAA;EACAnQ,QAAQ,CAACsQ,IAAT,CAAcrD,WAAd,CAA0Bb,SAAS,CAACF,QAAD,CAAnC,CAAA,CAAA;EAEA,IAAIqE,WAAW,GAAf,+GAAA,CAAA;EAMA,IAAIC,GAAG,GAAG,IAAIxO,GAAJ,CAAQ;EAACmG,EAAAA,IAAI,EAAC;EAACiI,IAAAA,OAAO,EAAC,IAAA;EAAT,GAAA;EAAN,CAAR,CAAV,CAAA;EACA,IAAMK,OAAO,GAAG/J,iBAAiB,CAAC6J,WAAD,CAAjC,CAAA;EACA,IAAMnD,QAAQ,GAAGqD,OAAO,CAACrJ,IAAR,CAAaoJ,GAAb,CAAjB,CAAA;EAGAlQ,UAAU,CAAC,YAAM;EAEjB;EACA2L,EAAAA,KAAK,CAACC,QAAD,EAAWkB,QAAX,CAAL,CAAA;EACC,CAJS,EAIP,IAJO,CAAV;;;;;;;;"}