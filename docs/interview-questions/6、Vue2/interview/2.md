# 2.谈谈对 Vue 响应式数据的理解

```js
function Vue(options) {
  this.$options = options;
  initData(this);
}

function initData(vm) {
  let data = vm.$options.data;

  observe(data);
}

function isObject(val) {
  return typeof val === "object" && val !== null;
}

function observe(data) {
  if (!isObject(data)) return;

  return new Observer(data);
}

class Observer {
  constructor(data) {
    this.walk(data);
  }
  walk(data) {
    Object.keys(data).forEach((key) => {
      defineReactive(data, key, data[key]);
    });
  }
}

function defineReactive(data, key, value) {
  observe(value);
  Object.defineProperty(data, key, {
    get() {
      return value;
    },
    set(newValue) {
      if (value !== newValue) return;
      observe(newValue);
      value = newValue;
    },
  });
}
```

```js
let vm = new Vue({
  data: {
    name: "amyas",
    obj: {
      val: {
        a: 1,
      },
    },
  },
});
console.log(vm);
```
