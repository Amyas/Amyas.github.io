<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./dep.js"></script>
    <script src="./watcher.js"></script>
    <script src="./compiler.js"></script>
    <script src="./vdom.js"></script>
    <script src="./observe.js"></script>
    <script src="./vue.js"></script>
    <script>
      // const oldTemplate = `<div>
      //   <li>1</li>  
      // </div>`;
      const oldTemplate = `<div>
        <li key="1">1</li>  
        <li key="2">2</li>  
      </div>`;
      const vm1 = new Vue({ data: { message: "hello world" } });
      const render1 = compileToFunction(oldTemplate);
      const vnode1 = render1.call(vm1);
      document.body.appendChild(createElm(vnode1));

      // const newTemplate = `<div>
      //   <li>2</li>  
      // </div>`;
      const newTemplate = `<div>
        <li key="1">1</li>  
      </div>`;
      const vm2 = new Vue({ data: { message: "zf" } });
      const render2 = compileToFunction(newTemplate);
      const vnode2 = render2.call(vm2);

      setTimeout(() => {
        patch(vnode1, vnode2);
      }, 100);
    </script>
  </body>
</html>
